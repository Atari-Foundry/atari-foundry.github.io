<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><title data-next-head="">differences | forge Documentation | Atari Foundry</title><meta name="description" content="forge documentation: differences" data-next-head=""/><link rel="preload" href="/images/foundry_logo_50H.png" as="image" data-next-head=""/><link rel="preload" href="/_next/static/chunks/c81f129e50a5fd79.css" as="style"/><link rel="stylesheet" href="/_next/static/chunks/c81f129e50a5fd79.css" data-n-g=""/><noscript data-n-css=""></noscript><script src="/_next/static/chunks/e8a4a4ae55bc5744.js" defer=""></script><script src="/_next/static/chunks/00dac80f236dcabb.js" defer=""></script><script src="/_next/static/chunks/44f6bc00d9aaf830.js" defer=""></script><script src="/_next/static/chunks/fd7cb30d70431a0f.js" defer=""></script><script src="/_next/static/chunks/turbopack-4769270d21ef6607.js" defer=""></script><script src="/_next/static/chunks/1b081b821847ed60.js" defer=""></script><script src="/_next/static/chunks/76d09b6b03e70f66.js" defer=""></script><script src="/_next/static/chunks/b56fd671c61106a7.js" defer=""></script><script src="/_next/static/chunks/turbopack-d90ce600b0329ce0.js" defer=""></script><script src="/_next/static/qaNXmQ4K6kOqdwj6jY2RG/_ssgManifest.js" defer=""></script><script src="/_next/static/qaNXmQ4K6kOqdwj6jY2RG/_buildManifest.js" defer=""></script></head><body><div id="__next"><div class="crt"><div class="scanlines" aria-hidden="true"></div><div class="noise" aria-hidden="true"></div><nav class="nav"><a class="nav-brand" href="/"><img alt="Atari Foundry icon" width="72" height="50" decoding="async" data-nimg="1" style="color:transparent;height:40px;width:auto" src="/images/foundry_logo_50H.png"/><div><span class="nav-brand-title">Atari Foundry</span><span class="nav-brand-sub">Products for Atari 8-bit</span></div></a><ul class="nav-links"><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/vault">Vault</a></li><li class="nav-item has-children"><button type="button" class="nav-link nav-trigger active" aria-haspopup="true" aria-expanded="false">Docs</button><div class="nav-dropdown"><a class="nav-dropdown-link" href="/docs/crucible">Crucible</a><a class="nav-dropdown-link" href="/docs/atrforge">atrforge</a><a class="nav-dropdown-link" href="/docs/forge">FORGE</a></div></li><li class="nav-item"><a class="nav-link" href="/downloads">Downloads</a></li><li class="nav-item"><a class="nav-link" href="/support">Support</a></li></ul></nav><header class="subhero"><p class="label">forge<!-- --> Documentation</p><h1 class="page-title">differences</h1></header><main><div class="docs-layout"><aside class="docs-sidebar"><nav class="docs-nav"><div class="docs-nav-section"><h3>Documentation</h3><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:0rem" href="/docs/forge/readme">README</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/forge/index">index</a></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">cc65</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/cc65">README</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">about</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/about/attributions">attributions</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/about/why-forge">why-forge</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">advanced topics</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/cio-reference">cio-reference</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/display-list-interrupts">display-list-interrupts</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/fujinet">fujinet</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/low-level-programming">low-level-programming</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/note-point">note-point</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/sio-operations">sio-operations</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/xio-reference">xio-reference</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">getting started</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/getting-started/compiling">compiling</a></li><li><a class="doc-link active" style="padding-left:1.2rem" href="/docs/forge/getting-started/differences">differences</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/getting-started/first-steps">first-steps</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/getting-started/introduction">introduction</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">editor</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/editor/editor-guide">editor-guide</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/editor/editor-optimization">editor-optimization</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">language reference</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/language-reference/expressions">expressions</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/language-reference/functions">functions</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/language-reference/statements">statements</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/language-reference/syntax">syntax</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">reference</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/hardware-registers">hardware-registers</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/interrupts">interrupts</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/iocb-structure">iocb-structure</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/memory-map">memory-map</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/memory-usage">memory-usage</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/os-equates">os-equates</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/r-handler">r-handler</a></li></ul></div></li></ul></div></nav></aside><div class="docs-content"><div class="docs-body"><div class="doc-markdown"><h1>FORGE Features and Capabilities</h1>
<h2>Overview</h2>
<p>FORGE (Fast Optimizing Runtime Generation Environment) is a fast BASIC interpreter for the Atari 8-bit computers with modern features and enhanced capabilities. This document describes the key statements, functions, and capabilities available in FORGE.</p>
<h2>New Statements</h2>
<h3>FUNC ... ENDFUNC (Replaces PROC/ENDPROC)</h3>
<p><strong>User-Defined Functions and Procedures</strong></p>
<p>FORGE uses <code>FUNC</code>/<code>ENDFUNC</code> for both procedures and functions, providing a unified approach to user-defined code.</p>
<p><strong>Syntax for Procedures (no return value):</strong></p>
<pre><pre class="language-basic"><code class="language-basic">FUNC name param1 param2 ...
  &#x27; procedure body
ENDFUNC
</code></pre></pre>
<p><strong>Syntax for Functions (with return value):</strong></p>
<pre><pre class="language-basic"><code class="language-basic">FUNC name param1 param2 ...
  &#x27; function body
  RETURN expression
ENDFUNC
</code></pre></pre>
<p><strong>Key Features:</strong></p>
<ul>
<li><code>FUNC</code> without a return type behaves like the old <code>PROC</code> (procedure)</li>
<li><code>FUNC</code> with <code>RETURN</code> returns a value and can be used in expressions</li>
<li>String-returning functions use a <code>$</code> suffix (e.g., <code>FUNC greet$</code>)</li>
<li>Parameters work the same way (integer variables)</li>
<li>Can be called with <code>@</code> prefix, <code>EXEC</code>, or by name in expressions</li>
<li><code>ENDFUNC</code> automatically emits <code>TOK_RET</code> or <code>TOK_RET_VAL</code> based on whether the function has a return type</li>
</ul>
<p><strong>Example - Procedure:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">FUNC greet name
  ? &quot;Hello, &quot;; name
ENDFUNC

@greet &quot;World&quot;
</code></pre></pre>
<p><strong>Example - Function:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">FUNC add x y
  RETURN x + y
ENDFUNC

result = add(10, 20)  &#x27; Returns 30
</code></pre></pre>
<hr/>
<h3>STATUS #<em>iochn</em>, <em>statusVar</em></h3>
<p><strong>Get Device Status</strong></p>
<p>The <code>STATUS</code> statement queries device status information from an I/O channel.</p>
<p><strong>Syntax:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">STATUS #iochn, statusVar
</code></pre></pre>
<p><strong>Key Features:</strong></p>
<ul>
<li>Calls CIO STATUS operation (command 13) on the specified channel</li>
<li>Stores CIO status code in <em>statusVar</em> (1 = success, &gt;127 = error)</li>
<li>After successful STATUS call, device-specific information is placed in DVSTAT buffer (memory locations 746-749)</li>
<li>Essential for R: device operations (Atari 850, R:Verter, BOB-Verter) to check carrier status, error bits, and buffer counts</li>
</ul>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">OPEN #1, 12, 0, &quot;R1:&quot;
STATUS #1, ST
IF ST = 1 THEN
  ERR_BITS = DVSTAT(0)
  SENSE = DVSTAT(1)
ENDIF
</code></pre></pre>
<hr/>
<h3>NOTE #<em>iochn</em>, <em>sectVar</em>, <em>byteVar</em></h3>
<p><strong>Get Current File Position</strong></p>
<p>The <code>NOTE</code> statement retrieves the current file position for random-access file operations.</p>
<p><strong>Syntax:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">NOTE #iochn, sectVar, byteVar
</code></pre></pre>
<p><strong>Key Features:</strong></p>
<ul>
<li>Gets current logical file position (sector + byte offset)</li>
<li>Stores 16-bit sector number (0-65535) into <em>sectVar</em></li>
<li>Stores 8-bit byte offset (0-255) into <em>byteVar</em></li>
<li>Automatically preserves AUX1 mode from when file was opened</li>
<li>Essential for building indexes for random-access file operations</li>
<li>Works with disk files (<code>D:</code>) and other devices supporting random access</li>
</ul>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">OPEN #1, 8, 0, &quot;D:USERS.DAT&quot;
NOTE #1, SEC, BYT  &#x27; Save position before writing
PRINT #1, &quot;Record data&quot;
</code></pre></pre>
<hr/>
<h3>POINT #<em>iochn</em>, <em>sectExpr</em>, <em>byteExpr</em></h3>
<p><strong>Set File Position</strong></p>
<p>The <code>POINT</code> statement sets the file position for random-access file operations.</p>
<p><strong>Syntax:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">POINT #iochn, sectExpr, byteExpr
</code></pre></pre>
<p><strong>Key Features:</strong></p>
<ul>
<li>Sets file position to specified sector and byte offset</li>
<li>Enables indexed/random-access reads by jumping to previously saved positions</li>
<li>Automatically preserves AUX1 mode from when file was opened</li>
<li>Works with disk files (<code>D:</code>) and other devices supporting random access</li>
<li>Used together with <code>NOTE</code> for building indexed file systems</li>
</ul>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">OPEN #1, 4, 0, &quot;D:USERS.DAT&quot;
POINT #1, SEC, BYT  &#x27; Jump to saved position
INPUT #1, A$
</code></pre></pre>
<hr/>
<h3>INCLUDE &quot;<em>filename</em>&quot;</h3>
<p><strong>Include Source Files</strong></p>
<p>The <code>INCLUDE</code> directive allows modular code organization by including other source files at compile time.</p>
<p><strong>Syntax:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">INCLUDE &quot;filename&quot;
INCLUDE ONCE &quot;filename&quot;
#include &quot;filename&quot;  &#x27; C-style syntax also supported
</code></pre></pre>
<p><strong>Key Features:</strong></p>
<ul>
<li>Inserts contents of another source file at compile time</li>
<li>Supports <code>INCLUDE ONCE</code> to prevent multiple inclusions</li>
<li>Automatic <code>.bas</code> extension if no extension specified</li>
<li>Path resolution: current file directory → include search paths → working directory</li>
<li>Cross-platform path support (both <code>/</code> and <code>\</code> separators)</li>
<li>Circular include detection (max 32 levels)</li>
<li>Only works with command-line compiler, not IDE interpreter</li>
</ul>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">INCLUDE &quot;lib/math.bas&quot;
INCLUDE &quot;lib/graphics.bas&quot;

FUNC main
  ? add(5, 3)
ENDFUNC

@main
</code></pre></pre>
<hr/>
<h2>New Functions</h2>
<h3>DVSTAT(<em>index</em>)</h3>
<p><strong>Read DVSTAT Buffer</strong></p>
<p>The <code>DVSTAT()</code> function provides easy access to the device status buffer (memory locations 746-749).</p>
<p><strong>Syntax:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">DVSTAT(index)  &#x27; index: 0, 1, 2, or 3
</code></pre></pre>
<p><strong>Key Features:</strong></p>
<ul>
<li>Reads a byte from the DVSTAT buffer</li>
<li><em>index</em> must be 0, 1, 2, or 3 (corresponding to DVSTAT[0] through DVSTAT[3])</li>
<li>Used after <code>STATUS</code> statement to read device-specific information</li>
<li>Meaning of each byte depends on device handler:<!-- -->
<ul>
<li><code>DVSTAT(0)</code> - Error bits (bitfield)</li>
<li><code>DVSTAT(1)</code> - Sense byte or buffer count low byte</li>
<li><code>DVSTAT(2)</code> - Buffer count high byte (usually 0)</li>
<li><code>DVSTAT(3)</code> - Output buffer count</li>
</ul>
</li>
<li>Particularly useful with R: devices for checking carrier status, error bits, and buffer counts</li>
</ul>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">STATUS #1, ST
IF ST = 1 THEN
  ERR_BITS = DVSTAT(0)
  SENSE = DVSTAT(1)
  INPUT_COUNT = DVSTAT(1) + 256 * DVSTAT(2)
  OUTPUT_COUNT = DVSTAT(3)
ENDIF
</code></pre></pre>
<hr/>
<h2>Functional Enhancements</h2>
<h3>Random-Access File Operations</h3>
<p>FORGE adds native support for random-access file operations through <code>NOTE</code> and <code>POINT</code> statements:</p>
<ul>
<li><strong>Automatic AUX1 preservation</strong> - No need to manually track and pass AUX1 values</li>
<li><strong>Safer than XIO</strong> - Built-in error handling and proper mode management</li>
<li><strong>Indexed file support</strong> - Enables building databases, message bases, and indexed record systems</li>
<li><strong>Simplified syntax</strong> - No need to remember XIO command codes (37/38)</li>
</ul>
<h3>Modular Code Organization</h3>
<p>FORGE adds <code>INCLUDE</code> directives for better code organization:</p>
<ul>
<li><strong>Multi-file projects</strong> - Split large programs into logical modules</li>
<li><strong>Code reuse</strong> - Build libraries of reusable procedures and functions</li>
<li><strong>Better organization</strong> - Separate concerns into different files</li>
<li><strong>Include guards</strong> - <code>INCLUDE ONCE</code> prevents duplicate inclusions</li>
</ul>
<h3>Unified Function/Procedure Syntax</h3>
<p>FORGE uses <code>FUNC</code>/<code>ENDFUNC</code> for both procedures and functions:</p>
<ul>
<li><strong>Unified syntax</strong> - One keyword for both procedures and functions</li>
<li><strong>Return values</strong> - Functions with <code>RETURN</code> can be used in expressions</li>
<li><strong>Automatic return handling</strong> - <code>ENDFUNC</code> automatically emits the correct return token</li>
<li><strong>Cleaner code</strong> - More natural expression of mathematical and logical operations</li>
</ul>
<h3>Device Status Queries</h3>
<p>FORGE adds <code>STATUS</code> statement and <code>DVSTAT()</code> function:</p>
<ul>
<li><strong>Standardized status checking</strong> - Consistent way to query device status</li>
<li><strong>R: device support</strong> - Essential for serial device operations (Atari 850, modems)</li>
<li><strong>Error detection</strong> - Easy access to device error bits and status information</li>
<li><strong>Buffer management</strong> - Check input/output buffer counts for concurrent mode</li>
</ul>
<hr/>
<h2>Summary</h2>
<p>FORGE provides the following key functional capabilities:</p>
<ol>
<li><strong>FUNC/ENDFUNC</strong> - Unified syntax for procedures and functions (replaces PROC/ENDPROC)</li>
<li><strong>STATUS</strong> - Device status querying statement</li>
<li><strong>NOTE</strong> - Get current file position for random-access files</li>
<li><strong>POINT</strong> - Set file position for random-access files</li>
<li><strong>INCLUDE</strong> - Source file inclusion for modular code organization</li>
<li><strong>DVSTAT()</strong> - Function to read device status buffer</li>
</ol>
<p>These additions enable:</p>
<ul>
<li>Better code organization (INCLUDE)</li>
<li>Unified function/procedure syntax (FUNC replaces PROC)</li>
<li>Native random-access file operations (NOTE/POINT)</li>
<li>Easier device status checking (STATUS/DVSTAT)</li>
</ul>
<p><strong>Note:</strong> FORGE uses <code>FUNC</code>/<code>ENDFUNC</code> for both procedures and functions. If you&#x27;re migrating code that uses <code>PROC</code>/<code>ENDPROC</code>, update it to use <code>FUNC</code>/<code>ENDFUNC</code> instead.</p></div></div></div></div></main><footer class="footer"><p>© 2026 Atari Foundry · Rick Collette · Software for Atari 8-bit builders.</p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"product":"forge","productDocs":{"product":"forge","files":[{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/cc65/README.md","relativePath":"cc65/README.md","relativeDir":"cc65","filename":"README","slug":"readme","name":"README"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/README.md","relativePath":"README.md","relativeDir":"","filename":"README","slug":"readme","name":"README"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/attributions.md","relativePath":"about/attributions.md","relativeDir":"about","filename":"attributions","slug":"attributions","name":"attributions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/cio-reference.md","relativePath":"advanced-topics/cio-reference.md","relativeDir":"advanced-topics","filename":"cio-reference","slug":"cio-reference","name":"cio-reference"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/compiling.md","relativePath":"getting-started/compiling.md","relativeDir":"getting-started","filename":"compiling","slug":"compiling","name":"compiling"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/differences.md","relativePath":"getting-started/differences.md","relativeDir":"getting-started","filename":"differences","slug":"differences","name":"differences"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/display-list-interrupts.md","relativePath":"advanced-topics/display-list-interrupts.md","relativeDir":"advanced-topics","filename":"display-list-interrupts","slug":"display-list-interrupts","name":"display-list-interrupts"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-guide.md","relativePath":"editor/editor-guide.md","relativeDir":"editor","filename":"editor-guide","slug":"editor-guide","name":"editor-guide"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-optimization.md","relativePath":"editor/editor-optimization.md","relativeDir":"editor","filename":"editor-optimization","slug":"editor-optimization","name":"editor-optimization"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/expressions.md","relativePath":"language-reference/expressions.md","relativeDir":"language-reference","filename":"expressions","slug":"expressions","name":"expressions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/first-steps.md","relativePath":"getting-started/first-steps.md","relativeDir":"getting-started","filename":"first-steps","slug":"first-steps","name":"first-steps"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/fujinet.md","relativePath":"advanced-topics/fujinet.md","relativeDir":"advanced-topics","filename":"fujinet","slug":"fujinet","name":"fujinet"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/functions.md","relativePath":"language-reference/functions.md","relativeDir":"language-reference","filename":"functions","slug":"functions","name":"functions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/hardware-registers.md","relativePath":"reference/hardware-registers.md","relativeDir":"reference","filename":"hardware-registers","slug":"hardware-registers","name":"hardware-registers"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/index.md","relativePath":"index.md","relativeDir":"","filename":"index","slug":"index","name":"index"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/interrupts.md","relativePath":"reference/interrupts.md","relativeDir":"reference","filename":"interrupts","slug":"interrupts","name":"interrupts"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/introduction.md","relativePath":"getting-started/introduction.md","relativeDir":"getting-started","filename":"introduction","slug":"introduction","name":"introduction"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/iocb-structure.md","relativePath":"reference/iocb-structure.md","relativeDir":"reference","filename":"iocb-structure","slug":"iocb-structure","name":"iocb-structure"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/low-level-programming.md","relativePath":"advanced-topics/low-level-programming.md","relativeDir":"advanced-topics","filename":"low-level-programming","slug":"low-level-programming","name":"low-level-programming"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-map.md","relativePath":"reference/memory-map.md","relativeDir":"reference","filename":"memory-map","slug":"memory-map","name":"memory-map"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-usage.md","relativePath":"reference/memory-usage.md","relativeDir":"reference","filename":"memory-usage","slug":"memory-usage","name":"memory-usage"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/note-point.md","relativePath":"advanced-topics/note-point.md","relativeDir":"advanced-topics","filename":"note-point","slug":"note-point","name":"note-point"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/os-equates.md","relativePath":"reference/os-equates.md","relativeDir":"reference","filename":"os-equates","slug":"os-equates","name":"os-equates"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/r-handler.md","relativePath":"reference/r-handler.md","relativeDir":"reference","filename":"r-handler","slug":"r-handler","name":"r-handler"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/sio-operations.md","relativePath":"advanced-topics/sio-operations.md","relativeDir":"advanced-topics","filename":"sio-operations","slug":"sio-operations","name":"sio-operations"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/statements.md","relativePath":"language-reference/statements.md","relativeDir":"language-reference","filename":"statements","slug":"statements","name":"statements"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/syntax.md","relativePath":"language-reference/syntax.md","relativeDir":"language-reference","filename":"syntax","slug":"syntax","name":"syntax"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/why-forge.md","relativePath":"about/why-forge.md","relativeDir":"about","filename":"why-forge","slug":"why-forge","name":"why-forge"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/xio-reference.md","relativePath":"advanced-topics/xio-reference.md","relativeDir":"advanced-topics","filename":"xio-reference","slug":"xio-reference","name":"xio-reference"}],"navTree":{"cc65":{"_files":[{"name":"README","slug":"readme","path":"cc65/README.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/cc65/README.md","isIndex":true}]},"_files":[{"name":"README","slug":"readme","path":"README.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/README.md","isIndex":true},{"name":"index","slug":"index","path":"index.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/index.md","isIndex":false}],"about":{"_files":[{"name":"attributions","slug":"attributions","path":"about/attributions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/attributions.md","isIndex":false},{"name":"why-forge","slug":"why-forge","path":"about/why-forge.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/why-forge.md","isIndex":false}]},"advanced-topics":{"_files":[{"name":"cio-reference","slug":"cio-reference","path":"advanced-topics/cio-reference.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/cio-reference.md","isIndex":false},{"name":"display-list-interrupts","slug":"display-list-interrupts","path":"advanced-topics/display-list-interrupts.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/display-list-interrupts.md","isIndex":false},{"name":"fujinet","slug":"fujinet","path":"advanced-topics/fujinet.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/fujinet.md","isIndex":false},{"name":"low-level-programming","slug":"low-level-programming","path":"advanced-topics/low-level-programming.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/low-level-programming.md","isIndex":false},{"name":"note-point","slug":"note-point","path":"advanced-topics/note-point.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/note-point.md","isIndex":false},{"name":"sio-operations","slug":"sio-operations","path":"advanced-topics/sio-operations.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/sio-operations.md","isIndex":false},{"name":"xio-reference","slug":"xio-reference","path":"advanced-topics/xio-reference.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/xio-reference.md","isIndex":false}]},"getting-started":{"_files":[{"name":"compiling","slug":"compiling","path":"getting-started/compiling.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/compiling.md","isIndex":false},{"name":"differences","slug":"differences","path":"getting-started/differences.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/differences.md","isIndex":false},{"name":"first-steps","slug":"first-steps","path":"getting-started/first-steps.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/first-steps.md","isIndex":false},{"name":"introduction","slug":"introduction","path":"getting-started/introduction.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/introduction.md","isIndex":false}]},"editor":{"_files":[{"name":"editor-guide","slug":"editor-guide","path":"editor/editor-guide.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-guide.md","isIndex":false},{"name":"editor-optimization","slug":"editor-optimization","path":"editor/editor-optimization.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-optimization.md","isIndex":false}]},"language-reference":{"_files":[{"name":"expressions","slug":"expressions","path":"language-reference/expressions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/expressions.md","isIndex":false},{"name":"functions","slug":"functions","path":"language-reference/functions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/functions.md","isIndex":false},{"name":"statements","slug":"statements","path":"language-reference/statements.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/statements.md","isIndex":false},{"name":"syntax","slug":"syntax","path":"language-reference/syntax.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/syntax.md","isIndex":false}]},"reference":{"_files":[{"name":"hardware-registers","slug":"hardware-registers","path":"reference/hardware-registers.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/hardware-registers.md","isIndex":false},{"name":"interrupts","slug":"interrupts","path":"reference/interrupts.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/interrupts.md","isIndex":false},{"name":"iocb-structure","slug":"iocb-structure","path":"reference/iocb-structure.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/iocb-structure.md","isIndex":false},{"name":"memory-map","slug":"memory-map","path":"reference/memory-map.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-map.md","isIndex":false},{"name":"memory-usage","slug":"memory-usage","path":"reference/memory-usage.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-usage.md","isIndex":false},{"name":"os-equates","slug":"os-equates","path":"reference/os-equates.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/os-equates.md","isIndex":false},{"name":"r-handler","slug":"r-handler","path":"reference/r-handler.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/r-handler.md","isIndex":false}]}}},"docFile":{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/differences.md","relativePath":"getting-started/differences.md","relativeDir":"getting-started","filename":"differences","slug":"differences","name":"differences","content":"# FORGE Features and Capabilities\n\n## Overview\n\nFORGE (Fast Optimizing Runtime Generation Environment) is a fast BASIC interpreter for the Atari 8-bit computers with modern features and enhanced capabilities. This document describes the key statements, functions, and capabilities available in FORGE.\n\n## New Statements\n\n### FUNC ... ENDFUNC (Replaces PROC/ENDPROC)\n\n**User-Defined Functions and Procedures**\n\nFORGE uses `FUNC`/`ENDFUNC` for both procedures and functions, providing a unified approach to user-defined code.\n\n**Syntax for Procedures (no return value):**\n```basic\nFUNC name param1 param2 ...\n  ' procedure body\nENDFUNC\n```\n\n**Syntax for Functions (with return value):**\n```basic\nFUNC name param1 param2 ...\n  ' function body\n  RETURN expression\nENDFUNC\n```\n\n**Key Features:**\n- `FUNC` without a return type behaves like the old `PROC` (procedure)\n- `FUNC` with `RETURN` returns a value and can be used in expressions\n- String-returning functions use a `$` suffix (e.g., `FUNC greet$`)\n- Parameters work the same way (integer variables)\n- Can be called with `@` prefix, `EXEC`, or by name in expressions\n- `ENDFUNC` automatically emits `TOK_RET` or `TOK_RET_VAL` based on whether the function has a return type\n\n**Example - Procedure:**\n```basic\nFUNC greet name\n  ? \"Hello, \"; name\nENDFUNC\n\n@greet \"World\"\n```\n\n**Example - Function:**\n```basic\nFUNC add x y\n  RETURN x + y\nENDFUNC\n\nresult = add(10, 20)  ' Returns 30\n```\n\n---\n\n### STATUS #_iochn_, _statusVar_\n\n**Get Device Status**\n\nThe `STATUS` statement queries device status information from an I/O channel.\n\n**Syntax:**\n```basic\nSTATUS #iochn, statusVar\n```\n\n**Key Features:**\n- Calls CIO STATUS operation (command 13) on the specified channel\n- Stores CIO status code in _statusVar_ (1 = success, \u003e127 = error)\n- After successful STATUS call, device-specific information is placed in DVSTAT buffer (memory locations 746-749)\n- Essential for R: device operations (Atari 850, R:Verter, BOB-Verter) to check carrier status, error bits, and buffer counts\n\n**Example:**\n```basic\nOPEN #1, 12, 0, \"R1:\"\nSTATUS #1, ST\nIF ST = 1 THEN\n  ERR_BITS = DVSTAT(0)\n  SENSE = DVSTAT(1)\nENDIF\n```\n\n---\n\n### NOTE #_iochn_, _sectVar_, _byteVar_\n\n**Get Current File Position**\n\nThe `NOTE` statement retrieves the current file position for random-access file operations.\n\n**Syntax:**\n```basic\nNOTE #iochn, sectVar, byteVar\n```\n\n**Key Features:**\n- Gets current logical file position (sector + byte offset)\n- Stores 16-bit sector number (0-65535) into _sectVar_\n- Stores 8-bit byte offset (0-255) into _byteVar_\n- Automatically preserves AUX1 mode from when file was opened\n- Essential for building indexes for random-access file operations\n- Works with disk files (`D:`) and other devices supporting random access\n\n**Example:**\n```basic\nOPEN #1, 8, 0, \"D:USERS.DAT\"\nNOTE #1, SEC, BYT  ' Save position before writing\nPRINT #1, \"Record data\"\n```\n\n---\n\n### POINT #_iochn_, _sectExpr_, _byteExpr_\n\n**Set File Position**\n\nThe `POINT` statement sets the file position for random-access file operations.\n\n**Syntax:**\n```basic\nPOINT #iochn, sectExpr, byteExpr\n```\n\n**Key Features:**\n- Sets file position to specified sector and byte offset\n- Enables indexed/random-access reads by jumping to previously saved positions\n- Automatically preserves AUX1 mode from when file was opened\n- Works with disk files (`D:`) and other devices supporting random access\n- Used together with `NOTE` for building indexed file systems\n\n**Example:**\n```basic\nOPEN #1, 4, 0, \"D:USERS.DAT\"\nPOINT #1, SEC, BYT  ' Jump to saved position\nINPUT #1, A$\n```\n\n---\n\n### INCLUDE \"_filename_\"\n\n**Include Source Files**\n\nThe `INCLUDE` directive allows modular code organization by including other source files at compile time.\n\n**Syntax:**\n```basic\nINCLUDE \"filename\"\nINCLUDE ONCE \"filename\"\n#include \"filename\"  ' C-style syntax also supported\n```\n\n**Key Features:**\n- Inserts contents of another source file at compile time\n- Supports `INCLUDE ONCE` to prevent multiple inclusions\n- Automatic `.bas` extension if no extension specified\n- Path resolution: current file directory → include search paths → working directory\n- Cross-platform path support (both `/` and `\\` separators)\n- Circular include detection (max 32 levels)\n- Only works with command-line compiler, not IDE interpreter\n\n**Example:**\n```basic\nINCLUDE \"lib/math.bas\"\nINCLUDE \"lib/graphics.bas\"\n\nFUNC main\n  ? add(5, 3)\nENDFUNC\n\n@main\n```\n\n---\n\n## New Functions\n\n### DVSTAT(_index_)\n\n**Read DVSTAT Buffer**\n\nThe `DVSTAT()` function provides easy access to the device status buffer (memory locations 746-749).\n\n**Syntax:**\n```basic\nDVSTAT(index)  ' index: 0, 1, 2, or 3\n```\n\n**Key Features:**\n- Reads a byte from the DVSTAT buffer\n- _index_ must be 0, 1, 2, or 3 (corresponding to DVSTAT[0] through DVSTAT[3])\n- Used after `STATUS` statement to read device-specific information\n- Meaning of each byte depends on device handler:\n  - `DVSTAT(0)` - Error bits (bitfield)\n  - `DVSTAT(1)` - Sense byte or buffer count low byte\n  - `DVSTAT(2)` - Buffer count high byte (usually 0)\n  - `DVSTAT(3)` - Output buffer count\n- Particularly useful with R: devices for checking carrier status, error bits, and buffer counts\n\n**Example:**\n```basic\nSTATUS #1, ST\nIF ST = 1 THEN\n  ERR_BITS = DVSTAT(0)\n  SENSE = DVSTAT(1)\n  INPUT_COUNT = DVSTAT(1) + 256 * DVSTAT(2)\n  OUTPUT_COUNT = DVSTAT(3)\nENDIF\n```\n\n---\n\n## Functional Enhancements\n\n### Random-Access File Operations\n\nFORGE adds native support for random-access file operations through `NOTE` and `POINT` statements:\n\n- **Automatic AUX1 preservation** - No need to manually track and pass AUX1 values\n- **Safer than XIO** - Built-in error handling and proper mode management\n- **Indexed file support** - Enables building databases, message bases, and indexed record systems\n- **Simplified syntax** - No need to remember XIO command codes (37/38)\n\n### Modular Code Organization\n\nFORGE adds `INCLUDE` directives for better code organization:\n\n- **Multi-file projects** - Split large programs into logical modules\n- **Code reuse** - Build libraries of reusable procedures and functions\n- **Better organization** - Separate concerns into different files\n- **Include guards** - `INCLUDE ONCE` prevents duplicate inclusions\n\n### Unified Function/Procedure Syntax\n\nFORGE uses `FUNC`/`ENDFUNC` for both procedures and functions:\n\n- **Unified syntax** - One keyword for both procedures and functions\n- **Return values** - Functions with `RETURN` can be used in expressions\n- **Automatic return handling** - `ENDFUNC` automatically emits the correct return token\n- **Cleaner code** - More natural expression of mathematical and logical operations\n\n### Device Status Queries\n\nFORGE adds `STATUS` statement and `DVSTAT()` function:\n\n- **Standardized status checking** - Consistent way to query device status\n- **R: device support** - Essential for serial device operations (Atari 850, modems)\n- **Error detection** - Easy access to device error bits and status information\n- **Buffer management** - Check input/output buffer counts for concurrent mode\n\n---\n\n## Summary\n\nFORGE provides the following key functional capabilities:\n\n1. **FUNC/ENDFUNC** - Unified syntax for procedures and functions (replaces PROC/ENDPROC)\n2. **STATUS** - Device status querying statement\n3. **NOTE** - Get current file position for random-access files\n4. **POINT** - Set file position for random-access files\n5. **INCLUDE** - Source file inclusion for modular code organization\n6. **DVSTAT()** - Function to read device status buffer\n\nThese additions enable:\n- Better code organization (INCLUDE)\n- Unified function/procedure syntax (FUNC replaces PROC)\n- Native random-access file operations (NOTE/POINT)\n- Easier device status checking (STATUS/DVSTAT)\n\n**Note:** FORGE uses `FUNC`/`ENDFUNC` for both procedures and functions. If you're migrating code that uses `PROC`/`ENDPROC`, update it to use `FUNC`/`ENDFUNC` instead.\n"},"currentPath":"getting-started/differences"},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["forge","getting-started","differences"]},"buildId":"qaNXmQ4K6kOqdwj6jY2RG","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>