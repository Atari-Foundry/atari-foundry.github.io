<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><title data-next-head="">display-list-interrupts | forge Documentation | Atari Foundry</title><meta name="description" content="forge documentation: display-list-interrupts" data-next-head=""/><link rel="preload" href="/images/foundry_logo_50H.png" as="image" data-next-head=""/><link rel="preload" href="/_next/static/chunks/c81f129e50a5fd79.css" as="style"/><link rel="stylesheet" href="/_next/static/chunks/c81f129e50a5fd79.css" data-n-g=""/><noscript data-n-css=""></noscript><script src="/_next/static/chunks/e8a4a4ae55bc5744.js" defer=""></script><script src="/_next/static/chunks/00dac80f236dcabb.js" defer=""></script><script src="/_next/static/chunks/44f6bc00d9aaf830.js" defer=""></script><script src="/_next/static/chunks/fd7cb30d70431a0f.js" defer=""></script><script src="/_next/static/chunks/turbopack-4769270d21ef6607.js" defer=""></script><script src="/_next/static/chunks/1b081b821847ed60.js" defer=""></script><script src="/_next/static/chunks/76d09b6b03e70f66.js" defer=""></script><script src="/_next/static/chunks/b56fd671c61106a7.js" defer=""></script><script src="/_next/static/chunks/turbopack-d90ce600b0329ce0.js" defer=""></script><script src="/_next/static/CnF04P5ob_bUVxETgw2P_/_ssgManifest.js" defer=""></script><script src="/_next/static/CnF04P5ob_bUVxETgw2P_/_buildManifest.js" defer=""></script></head><body><div id="__next"><div class="crt"><div class="scanlines" aria-hidden="true"></div><div class="noise" aria-hidden="true"></div><nav class="nav"><a class="nav-brand" href="/"><img alt="Atari Foundry icon" width="72" height="50" decoding="async" data-nimg="1" style="color:transparent;height:40px;width:auto" src="/images/foundry_logo_50H.png"/><div><span class="nav-brand-title">Atari Foundry</span><span class="nav-brand-sub">Products for Atari 8-bit</span></div></a><ul class="nav-links"><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/vault">Vault</a></li><li class="nav-item has-children"><button type="button" class="nav-link nav-trigger active" aria-haspopup="true" aria-expanded="false">Docs</button><div class="nav-dropdown"><a class="nav-dropdown-link" href="/docs/crucible">Crucible</a><a class="nav-dropdown-link" href="/docs/atrforge">atrforge</a><a class="nav-dropdown-link" href="/docs/forge">FORGE</a></div></li><li class="nav-item"><a class="nav-link" href="/downloads">Downloads</a></li><li class="nav-item"><a class="nav-link" href="/support">Support</a></li></ul></nav><header class="subhero"><p class="label">forge<!-- --> Documentation</p><h1 class="page-title">display-list-interrupts</h1></header><main><div class="docs-layout"><aside class="docs-sidebar"><nav class="docs-nav"><div class="docs-nav-section"><h3>Documentation</h3><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:0rem" href="/docs/forge/readme">README</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/forge/index">index</a></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">cc65</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/cc65">README</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">about</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/about/attributions">attributions</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/about/why-forge">why-forge</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">advanced topics</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/cio-reference">cio-reference</a></li><li><a class="doc-link active" style="padding-left:1.2rem" href="/docs/forge/advanced-topics/display-list-interrupts">display-list-interrupts</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/fujinet">fujinet</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/low-level-programming">low-level-programming</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/note-point">note-point</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/sio-operations">sio-operations</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/xio-reference">xio-reference</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">getting started</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/getting-started/compiling">compiling</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/getting-started/differences">differences</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/getting-started/first-steps">first-steps</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/getting-started/introduction">introduction</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">editor</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/editor/editor-guide">editor-guide</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/editor/editor-optimization">editor-optimization</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">language reference</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/language-reference/expressions">expressions</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/language-reference/functions">functions</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/language-reference/statements">statements</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/language-reference/syntax">syntax</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">reference</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/hardware-registers">hardware-registers</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/interrupts">interrupts</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/iocb-structure">iocb-structure</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/memory-map">memory-map</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/memory-usage">memory-usage</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/os-equates">os-equates</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/r-handler">r-handler</a></li></ul></div></li></ul></div></nav></aside><div class="docs-content"><div class="docs-body"><div class="doc-markdown"><h1>Display List Interrupts</h1>
<p><em>Note: This is an advanced topic.</em></p>
<p>Display list interrupts (normally called <code>DLI</code>) are a way to modify display registers at certain vertical positions on the screen.</p>
<h2>What Are DLIs?</h2>
<p>DLIs allow you to change display hardware registers during screen rendering, enabling effects that would otherwise be impossible with a single set of register values.</p>
<h2>Uses for DLIs</h2>
<p>You can use DLIs to:</p>
<ul>
<li><strong>Display more colors in the image</strong> - By changing color registers (registers from $D012 to $D01A)</li>
<li><strong>Split Player/Missile graphics</strong> - Move players/missiles to different horizontal positions (registers from $D000 to D007)</li>
<li><strong>Change scrolling position</strong> - Modify screen scrolling during display</li>
<li><strong>Change screen width</strong> - Adjust screen width mid-frame</li>
<li><strong>Modify P/M width</strong> - Change Player/Missile width settings</li>
<li><strong>Create color gradients</strong> - Change colors line-by-line for gradient effects</li>
</ul>
<h2>FORGE DLI Support</h2>
<p>FORGE allows you to specify one or more DLI routines, activate one or deactivate all DLI by using the <code>DLI</code> statement.</p>
<h2>Defining a DLI</h2>
<h3>DLI SET <em>name</em> = <em>op1</em>, <em>op2</em>, ... / DLIS.</h3>
<p>Setups a new DLI with the given name and performing the <em>op</em> operations.</p>
<p>Each operation is of the form:</p>
<ul>
<li><em>data</em> <code>INTO</code> <em>address</em></li>
<li><em>data</em> <code>WSYNC</code> <code>INTO</code> <em>address</em></li>
</ul>
<p>Where:</p>
<ul>
<li><em>data</em> is one constant byte or the name of a <code>DATA BYTE</code> array</li>
<li><em>address</em> is a memory location to modify</li>
</ul>
<h3>Array-Based DLIs</h3>
<p>If <em>data</em> is a <code>DATA</code> array, the first element (at index 0) will be used at the first line with DLI active in the screen, the second element at the second active line, etc.</p>
<h3>WSYNC</h3>
<p>The <code>WSYNC</code> word advances one line in the display area (this is done by writing to the <code>WSYNC</code> ANTIC register), so the value is set in the next screen line. You can put the <code>WSYNC</code> word multiple times to advance more than one line. This allows one DLI to modify multiple lines at the screen.</p>
<h3>Multiple INTO Operations</h3>
<p>Multiple <code>INTO</code> words can be used to write more than one register with the same value.</p>
<h3>Abbreviations</h3>
<ul>
<li><code>INTO</code> can be abbreviated to <code>I.</code></li>
<li><code>WSYNC</code> can be abbreviated to <code>W.</code></li>
</ul>
<h3>Important Notes</h3>
<ul>
<li>You can specify any number of operations, but as each one takes some time you could see display artifacts if you use too many.</li>
<li>By defining a DLI you are simply giving it a name, you need to activate the DLI afterwards.</li>
<li>You can split a DLI definition over multiple lines, just like <code>DATA</code> by ending a line with a comma and starting the next line with <code>DLI =</code></li>
</ul>
<h2>Enabling a DLI</h2>
<h3>DLI <em>name</em> / DL.</h3>
<p>This statement enables the DLI with the given name, the DLI must be defined before in the program.</p>
<p>This setups the OS DLI pointer to the named DLI and activates the interrupt bit in the display processor (the ANTIC chip), but does not activate on which lines the DLI must be called.</p>
<p>To define on which lines the DLI is active you must modify the Display List, see the examples below.</p>
<h3>Custom Machine Code DLIs</h3>
<p>You can also pass the name of a <code>DATA BYTE</code> array with a custom machine language routine to the <code>DLI</code> statement, the routine must begin with a <em>PHA</em> and end with <em>PLA</em> and <em>RTI</em>.</p>
<h2>Disabling a DLI</h2>
<h3>DLI / DL.</h3>
<p>This statement simply disables the DLI, returning the display to the original state.</p>
<h2>Display List Modification</h2>
<p>To activate DLIs on specific screen lines, you must modify the Display List. The Display List address is stored at memory location 560 (DPEEK(560)).</p>
<p>To enable a DLI on a specific line, you need to set bit 7 (add 128) to the display list instruction byte for that line.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">&#x27; Enable DLI on line 11 (offset 16 in display list)
POKE DPEEK(560) + 16, 130  &#x27; 2 + 128 = 130
</code></pre></pre>
<h2>Examples</h2>
<h3>Example 1: Simple Background Color Change</h3>
<p>This is the most basic example of a DLI that simply changes the background color at the middle of the screen:</p>
<pre><pre class="language-basic"><code class="language-basic">&#x27; Define the DLI: set background color to $24 = dark red.
DLI SET d1 = $24 INTO $D01A
&#x27; Setups screen
GRAPHICS 0
&#x27; Alter the Display List, adds a DLI at line 11 on the screen
POKE DPEEK(560) + 16, 130
&#x27; Activate DLI
DLI d1
&#x27; Wait for any key
? &quot;Press a Key&quot; : GET K
&#x27; Disable the DLI
DLI
</code></pre></pre>
<h3>Example 2: Multiple Color Changes</h3>
<p>The next example shows how you can use a DLI to change multiple values in the screen:</p>
<pre><pre class="language-basic"><code class="language-basic">&#x27; An array with color values
DATA Colors() BYTE = $24,$46,$68
&#x27; Define the DLI: set background color from the Color() array
&#x27; and text back color with value $8A in the same line and then
&#x27; the black in to the next line.
DLI SET d2 = Colors INTO $D01A,
DLI        = $8A INTO $D018,
DLI        = $00 WSYNC INTO $D018
&#x27; Setups screen
GRAPHICS 0
&#x27; Adds DLI at three lines:
POKE DPEEK(560) + 13, 130
POKE DPEEK(560) + 16, 130
POKE DPEEK(560) + 19, 130
&#x27; Activate DLI
DLI d2
&#x27; Wait for any key
? &quot;Press a Key&quot; : GET K
&#x27; Disable the DLI
DLI
</code></pre></pre>
<h3>Example 3: Player/Missile Movement</h3>
<p>The final example shows how you can move multiple P/M using one DLI:</p>
<pre><pre class="language-basic"><code class="language-basic">&#x27; Player shapes, positions and colors
DATA p1() BYTE = $E7,$81,$81,$E7
DATA p2() BYTE = $18,$3C,$3C,$18
DATA pos() BYTE = $40,$60,$80,$A0
DATA c1() BYTE = $28,$88,$C8,$08
DATA c2() BYTE = $2E,$80,$CE,$06
&#x27; Our DLI writes the position and colors to Player 1 and Player 2
DLI SET d3 = pos INTO $D000 INTO $D001,
DLI        = c1 INTO $D012, c2 INTO $D013
GRAPHICS 0 : PMGRAPHICS 2
&#x27; Setup our 4 DLI and Players
FOR I = 8 TO 20 STEP 4
  POKE DPEEK(560) + I, 130
  MOVE ADR(p1), PMADR(0)+I*4+5,4
  MOVE ADR(p2), PMADR(1)+I*4+5,4
NEXT
&#x27; Activate DLI
DLI d3
? &quot;Press a Key&quot;
REPEAT
  PAUSE
  pos(0) = pos(0) + 2
  pos(1) = pos(1) + 1
  pos(2) = pos(2) - 1
  pos(3) = pos(3) - 2
UNTIL KEY()
DLI
</code></pre></pre>
<h2>Useful Registers</h2>
<p>This is a table of some useful registers to change during a DLI:</p>
<table><thead><tr><th>Address</th><th>Register</th></tr></thead><tbody><tr><td>$D000</td><td>Player 0 horizontal pos.</td></tr><tr><td>$D001</td><td>Player 1 horizontal pos.</td></tr><tr><td>$D002</td><td>Player 2 horizontal pos.</td></tr><tr><td>$D003</td><td>Player 3 horizontal pos.</td></tr><tr><td>$D004</td><td>Missile 0 horizontal pos.</td></tr><tr><td>$D005</td><td>Missile 1 horizontal pos.</td></tr><tr><td>$D006</td><td>Missile 2 horizontal pos.</td></tr><tr><td>$D007</td><td>Missile 3 horizontal pos.</td></tr><tr><td>$D012</td><td>Color of player/missile 0</td></tr><tr><td>$D013</td><td>Color of player/missile 1</td></tr><tr><td>$D014</td><td>Color of player/missile 2</td></tr><tr><td>$D015</td><td>Color of player/missile 3</td></tr><tr><td>$D016</td><td>Color register 0</td></tr><tr><td>$D017</td><td>Color register 1</td></tr><tr><td>$D018</td><td>Color register 2</td></tr><tr><td>$D019</td><td>Color register 3</td></tr><tr><td>$D01A</td><td>Color of background</td></tr></tbody></table>
<h2>Best Practices</h2>
<ol>
<li><strong>Keep DLI routines short</strong> - Long DLI routines can cause display artifacts</li>
<li><strong>Test thoroughly</strong> - DLIs can be timing-sensitive</li>
<li><strong>Disable when done</strong> - Always disable DLIs when your program exits</li>
<li><strong>Use arrays for multiple lines</strong> - Arrays make it easy to change multiple lines</li>
<li><strong>Document your DLIs</strong> - Note which lines they affect and what they do</li>
</ol>
<h2>Troubleshooting</h2>
<p><strong>DLI not activating:</strong></p>
<ul>
<li>Check that you&#x27;ve modified the Display List correctly</li>
<li>Verify the DLI is enabled with <code>DLI name</code></li>
<li>Ensure the DLI is defined before it&#x27;s enabled</li>
</ul>
<p><strong>Display artifacts:</strong></p>
<ul>
<li>Reduce the number of operations in the DLI</li>
<li>Check timing - some operations may be too slow</li>
<li>Verify register addresses are correct</li>
</ul>
<p><strong>Colors not changing:</strong></p>
<ul>
<li>Check that you&#x27;re writing to the correct color register</li>
<li>Verify the graphics mode supports the color changes</li>
<li>Ensure the DLI is actually being called (check Display List)</li>
</ul>
<h2>Related Topics</h2>
<ul>
<li><a node="[object Object]" href="/docs/forge/advanced-topics/reference/hardware-registers">Hardware Registers</a> - Complete hardware register reference</li>
<li><a node="[object Object]" href="/docs/forge/advanced-topics/language-reference/statements">Statements</a> - DLI statement syntax</li>
<li><a node="[object Object]" href="/docs/forge/low-level-programming">Low-Level Programming</a> - Memory operations for DLI setup</li>
</ul></div></div></div></div></main><footer class="footer"><p>© 2026 Atari Foundry · Rick Collette · Software for Atari 8-bit builders.</p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"product":"forge","productDocs":{"product":"forge","files":[{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/cc65/README.md","relativePath":"cc65/README.md","relativeDir":"cc65","filename":"README","slug":"readme","name":"README"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/README.md","relativePath":"README.md","relativeDir":"","filename":"README","slug":"readme","name":"README"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/attributions.md","relativePath":"about/attributions.md","relativeDir":"about","filename":"attributions","slug":"attributions","name":"attributions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/cio-reference.md","relativePath":"advanced-topics/cio-reference.md","relativeDir":"advanced-topics","filename":"cio-reference","slug":"cio-reference","name":"cio-reference"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/compiling.md","relativePath":"getting-started/compiling.md","relativeDir":"getting-started","filename":"compiling","slug":"compiling","name":"compiling"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/differences.md","relativePath":"getting-started/differences.md","relativeDir":"getting-started","filename":"differences","slug":"differences","name":"differences"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/display-list-interrupts.md","relativePath":"advanced-topics/display-list-interrupts.md","relativeDir":"advanced-topics","filename":"display-list-interrupts","slug":"display-list-interrupts","name":"display-list-interrupts"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-guide.md","relativePath":"editor/editor-guide.md","relativeDir":"editor","filename":"editor-guide","slug":"editor-guide","name":"editor-guide"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-optimization.md","relativePath":"editor/editor-optimization.md","relativeDir":"editor","filename":"editor-optimization","slug":"editor-optimization","name":"editor-optimization"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/expressions.md","relativePath":"language-reference/expressions.md","relativeDir":"language-reference","filename":"expressions","slug":"expressions","name":"expressions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/first-steps.md","relativePath":"getting-started/first-steps.md","relativeDir":"getting-started","filename":"first-steps","slug":"first-steps","name":"first-steps"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/fujinet.md","relativePath":"advanced-topics/fujinet.md","relativeDir":"advanced-topics","filename":"fujinet","slug":"fujinet","name":"fujinet"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/functions.md","relativePath":"language-reference/functions.md","relativeDir":"language-reference","filename":"functions","slug":"functions","name":"functions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/hardware-registers.md","relativePath":"reference/hardware-registers.md","relativeDir":"reference","filename":"hardware-registers","slug":"hardware-registers","name":"hardware-registers"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/index.md","relativePath":"index.md","relativeDir":"","filename":"index","slug":"index","name":"index"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/interrupts.md","relativePath":"reference/interrupts.md","relativeDir":"reference","filename":"interrupts","slug":"interrupts","name":"interrupts"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/introduction.md","relativePath":"getting-started/introduction.md","relativeDir":"getting-started","filename":"introduction","slug":"introduction","name":"introduction"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/iocb-structure.md","relativePath":"reference/iocb-structure.md","relativeDir":"reference","filename":"iocb-structure","slug":"iocb-structure","name":"iocb-structure"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/low-level-programming.md","relativePath":"advanced-topics/low-level-programming.md","relativeDir":"advanced-topics","filename":"low-level-programming","slug":"low-level-programming","name":"low-level-programming"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-map.md","relativePath":"reference/memory-map.md","relativeDir":"reference","filename":"memory-map","slug":"memory-map","name":"memory-map"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-usage.md","relativePath":"reference/memory-usage.md","relativeDir":"reference","filename":"memory-usage","slug":"memory-usage","name":"memory-usage"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/note-point.md","relativePath":"advanced-topics/note-point.md","relativeDir":"advanced-topics","filename":"note-point","slug":"note-point","name":"note-point"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/os-equates.md","relativePath":"reference/os-equates.md","relativeDir":"reference","filename":"os-equates","slug":"os-equates","name":"os-equates"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/r-handler.md","relativePath":"reference/r-handler.md","relativeDir":"reference","filename":"r-handler","slug":"r-handler","name":"r-handler"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/sio-operations.md","relativePath":"advanced-topics/sio-operations.md","relativeDir":"advanced-topics","filename":"sio-operations","slug":"sio-operations","name":"sio-operations"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/statements.md","relativePath":"language-reference/statements.md","relativeDir":"language-reference","filename":"statements","slug":"statements","name":"statements"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/syntax.md","relativePath":"language-reference/syntax.md","relativeDir":"language-reference","filename":"syntax","slug":"syntax","name":"syntax"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/why-forge.md","relativePath":"about/why-forge.md","relativeDir":"about","filename":"why-forge","slug":"why-forge","name":"why-forge"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/xio-reference.md","relativePath":"advanced-topics/xio-reference.md","relativeDir":"advanced-topics","filename":"xio-reference","slug":"xio-reference","name":"xio-reference"}],"navTree":{"cc65":{"_files":[{"name":"README","slug":"readme","path":"cc65/README.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/cc65/README.md","isIndex":true}]},"_files":[{"name":"README","slug":"readme","path":"README.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/README.md","isIndex":true},{"name":"index","slug":"index","path":"index.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/index.md","isIndex":false}],"about":{"_files":[{"name":"attributions","slug":"attributions","path":"about/attributions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/attributions.md","isIndex":false},{"name":"why-forge","slug":"why-forge","path":"about/why-forge.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/why-forge.md","isIndex":false}]},"advanced-topics":{"_files":[{"name":"cio-reference","slug":"cio-reference","path":"advanced-topics/cio-reference.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/cio-reference.md","isIndex":false},{"name":"display-list-interrupts","slug":"display-list-interrupts","path":"advanced-topics/display-list-interrupts.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/display-list-interrupts.md","isIndex":false},{"name":"fujinet","slug":"fujinet","path":"advanced-topics/fujinet.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/fujinet.md","isIndex":false},{"name":"low-level-programming","slug":"low-level-programming","path":"advanced-topics/low-level-programming.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/low-level-programming.md","isIndex":false},{"name":"note-point","slug":"note-point","path":"advanced-topics/note-point.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/note-point.md","isIndex":false},{"name":"sio-operations","slug":"sio-operations","path":"advanced-topics/sio-operations.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/sio-operations.md","isIndex":false},{"name":"xio-reference","slug":"xio-reference","path":"advanced-topics/xio-reference.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/xio-reference.md","isIndex":false}]},"getting-started":{"_files":[{"name":"compiling","slug":"compiling","path":"getting-started/compiling.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/compiling.md","isIndex":false},{"name":"differences","slug":"differences","path":"getting-started/differences.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/differences.md","isIndex":false},{"name":"first-steps","slug":"first-steps","path":"getting-started/first-steps.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/first-steps.md","isIndex":false},{"name":"introduction","slug":"introduction","path":"getting-started/introduction.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/introduction.md","isIndex":false}]},"editor":{"_files":[{"name":"editor-guide","slug":"editor-guide","path":"editor/editor-guide.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-guide.md","isIndex":false},{"name":"editor-optimization","slug":"editor-optimization","path":"editor/editor-optimization.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-optimization.md","isIndex":false}]},"language-reference":{"_files":[{"name":"expressions","slug":"expressions","path":"language-reference/expressions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/expressions.md","isIndex":false},{"name":"functions","slug":"functions","path":"language-reference/functions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/functions.md","isIndex":false},{"name":"statements","slug":"statements","path":"language-reference/statements.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/statements.md","isIndex":false},{"name":"syntax","slug":"syntax","path":"language-reference/syntax.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/syntax.md","isIndex":false}]},"reference":{"_files":[{"name":"hardware-registers","slug":"hardware-registers","path":"reference/hardware-registers.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/hardware-registers.md","isIndex":false},{"name":"interrupts","slug":"interrupts","path":"reference/interrupts.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/interrupts.md","isIndex":false},{"name":"iocb-structure","slug":"iocb-structure","path":"reference/iocb-structure.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/iocb-structure.md","isIndex":false},{"name":"memory-map","slug":"memory-map","path":"reference/memory-map.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-map.md","isIndex":false},{"name":"memory-usage","slug":"memory-usage","path":"reference/memory-usage.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-usage.md","isIndex":false},{"name":"os-equates","slug":"os-equates","path":"reference/os-equates.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/os-equates.md","isIndex":false},{"name":"r-handler","slug":"r-handler","path":"reference/r-handler.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/r-handler.md","isIndex":false}]}}},"docFile":{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/display-list-interrupts.md","relativePath":"advanced-topics/display-list-interrupts.md","relativeDir":"advanced-topics","filename":"display-list-interrupts","slug":"display-list-interrupts","name":"display-list-interrupts","content":"# Display List Interrupts\n\n*Note: This is an advanced topic.*\n\nDisplay list interrupts (normally called `DLI`) are a way to modify display registers at certain vertical positions on the screen.\n\n## What Are DLIs?\n\nDLIs allow you to change display hardware registers during screen rendering, enabling effects that would otherwise be impossible with a single set of register values.\n\n## Uses for DLIs\n\nYou can use DLIs to:\n\n- **Display more colors in the image** - By changing color registers (registers from $D012 to $D01A)\n- **Split Player/Missile graphics** - Move players/missiles to different horizontal positions (registers from $D000 to D007)\n- **Change scrolling position** - Modify screen scrolling during display\n- **Change screen width** - Adjust screen width mid-frame\n- **Modify P/M width** - Change Player/Missile width settings\n- **Create color gradients** - Change colors line-by-line for gradient effects\n\n## FORGE DLI Support\n\nFORGE allows you to specify one or more DLI routines, activate one or deactivate all DLI by using the `DLI` statement.\n\n## Defining a DLI\n\n### DLI SET _name_ = _op1_, _op2_, ... / DLIS.\n\nSetups a new DLI with the given name and performing the _op_ operations.\n\nEach operation is of the form:\n- _data_ `INTO` _address_ \n- _data_ `WSYNC` `INTO` _address_\n\nWhere:\n- _data_ is one constant byte or the name of a `DATA BYTE` array\n- _address_ is a memory location to modify\n\n### Array-Based DLIs\n\nIf _data_ is a `DATA` array, the first element (at index 0) will be used at the first line with DLI active in the screen, the second element at the second active line, etc.\n\n### WSYNC\n\nThe `WSYNC` word advances one line in the display area (this is done by writing to the `WSYNC` ANTIC register), so the value is set in the next screen line. You can put the `WSYNC` word multiple times to advance more than one line. This allows one DLI to modify multiple lines at the screen.\n\n### Multiple INTO Operations\n\nMultiple `INTO` words can be used to write more than one register with the same value.\n\n### Abbreviations\n\n- `INTO` can be abbreviated to `I.`\n- `WSYNC` can be abbreviated to `W.`\n\n### Important Notes\n\n- You can specify any number of operations, but as each one takes some time you could see display artifacts if you use too many.\n- By defining a DLI you are simply giving it a name, you need to activate the DLI afterwards.\n- You can split a DLI definition over multiple lines, just like `DATA` by ending a line with a comma and starting the next line with `DLI =`\n\n## Enabling a DLI\n\n### DLI _name_ / DL.\n\nThis statement enables the DLI with the given name, the DLI must be defined before in the program.\n\nThis setups the OS DLI pointer to the named DLI and activates the interrupt bit in the display processor (the ANTIC chip), but does not activate on which lines the DLI must be called.\n\nTo define on which lines the DLI is active you must modify the Display List, see the examples below.\n\n### Custom Machine Code DLIs\n\nYou can also pass the name of a `DATA BYTE` array with a custom machine language routine to the `DLI` statement, the routine must begin with a _PHA_ and end with _PLA_ and _RTI_.\n\n## Disabling a DLI\n\n### DLI / DL.\n\nThis statement simply disables the DLI, returning the display to the original state.\n\n## Display List Modification\n\nTo activate DLIs on specific screen lines, you must modify the Display List. The Display List address is stored at memory location 560 (DPEEK(560)).\n\nTo enable a DLI on a specific line, you need to set bit 7 (add 128) to the display list instruction byte for that line.\n\n**Example:**\n```basic\n' Enable DLI on line 11 (offset 16 in display list)\nPOKE DPEEK(560) + 16, 130  ' 2 + 128 = 130\n```\n\n## Examples\n\n### Example 1: Simple Background Color Change\n\nThis is the most basic example of a DLI that simply changes the background color at the middle of the screen:\n\n```basic\n' Define the DLI: set background color to $24 = dark red.\nDLI SET d1 = $24 INTO $D01A\n' Setups screen\nGRAPHICS 0\n' Alter the Display List, adds a DLI at line 11 on the screen\nPOKE DPEEK(560) + 16, 130\n' Activate DLI\nDLI d1\n' Wait for any key\n? \"Press a Key\" : GET K\n' Disable the DLI\nDLI\n```\n\n### Example 2: Multiple Color Changes\n\nThe next example shows how you can use a DLI to change multiple values in the screen:\n\n```basic\n' An array with color values\nDATA Colors() BYTE = $24,$46,$68\n' Define the DLI: set background color from the Color() array\n' and text back color with value $8A in the same line and then\n' the black in to the next line.\nDLI SET d2 = Colors INTO $D01A,\nDLI        = $8A INTO $D018,\nDLI        = $00 WSYNC INTO $D018\n' Setups screen\nGRAPHICS 0\n' Adds DLI at three lines:\nPOKE DPEEK(560) + 13, 130\nPOKE DPEEK(560) + 16, 130\nPOKE DPEEK(560) + 19, 130\n' Activate DLI\nDLI d2\n' Wait for any key\n? \"Press a Key\" : GET K\n' Disable the DLI\nDLI\n```\n\n### Example 3: Player/Missile Movement\n\nThe final example shows how you can move multiple P/M using one DLI:\n\n```basic\n' Player shapes, positions and colors\nDATA p1() BYTE = $E7,$81,$81,$E7\nDATA p2() BYTE = $18,$3C,$3C,$18\nDATA pos() BYTE = $40,$60,$80,$A0\nDATA c1() BYTE = $28,$88,$C8,$08\nDATA c2() BYTE = $2E,$80,$CE,$06\n' Our DLI writes the position and colors to Player 1 and Player 2\nDLI SET d3 = pos INTO $D000 INTO $D001,\nDLI        = c1 INTO $D012, c2 INTO $D013\nGRAPHICS 0 : PMGRAPHICS 2\n' Setup our 4 DLI and Players\nFOR I = 8 TO 20 STEP 4\n  POKE DPEEK(560) + I, 130\n  MOVE ADR(p1), PMADR(0)+I*4+5,4\n  MOVE ADR(p2), PMADR(1)+I*4+5,4\nNEXT\n' Activate DLI\nDLI d3\n? \"Press a Key\"\nREPEAT\n  PAUSE\n  pos(0) = pos(0) + 2\n  pos(1) = pos(1) + 1\n  pos(2) = pos(2) - 1\n  pos(3) = pos(3) - 2\nUNTIL KEY()\nDLI\n```\n\n## Useful Registers\n\nThis is a table of some useful registers to change during a DLI:\n\n| Address | Register                  |\n|---------|---------------------------|\n| $D000   | Player 0 horizontal pos.  |\n| $D001   | Player 1 horizontal pos.  |\n| $D002   | Player 2 horizontal pos.  |\n| $D003   | Player 3 horizontal pos.  |\n| $D004   | Missile 0 horizontal pos. |\n| $D005   | Missile 1 horizontal pos. |\n| $D006   | Missile 2 horizontal pos. |\n| $D007   | Missile 3 horizontal pos. |\n| $D012   | Color of player/missile 0 |\n| $D013   | Color of player/missile 1 |\n| $D014   | Color of player/missile 2 |\n| $D015   | Color of player/missile 3 |\n| $D016   | Color register 0          |\n| $D017   | Color register 1          |\n| $D018   | Color register 2          |\n| $D019   | Color register 3          |\n| $D01A   | Color of background       |\n\n## Best Practices\n\n1. **Keep DLI routines short** - Long DLI routines can cause display artifacts\n2. **Test thoroughly** - DLIs can be timing-sensitive\n3. **Disable when done** - Always disable DLIs when your program exits\n4. **Use arrays for multiple lines** - Arrays make it easy to change multiple lines\n5. **Document your DLIs** - Note which lines they affect and what they do\n\n## Troubleshooting\n\n**DLI not activating:**\n- Check that you've modified the Display List correctly\n- Verify the DLI is enabled with `DLI name`\n- Ensure the DLI is defined before it's enabled\n\n**Display artifacts:**\n- Reduce the number of operations in the DLI\n- Check timing - some operations may be too slow\n- Verify register addresses are correct\n\n**Colors not changing:**\n- Check that you're writing to the correct color register\n- Verify the graphics mode supports the color changes\n- Ensure the DLI is actually being called (check Display List)\n\n## Related Topics\n\n- [Hardware Registers](../reference/hardware-registers.md) - Complete hardware register reference\n- [Statements](../language-reference/statements.md) - DLI statement syntax\n- [Low-Level Programming](low-level-programming.md) - Memory operations for DLI setup\n"},"currentPath":"advanced-topics/display-list-interrupts"},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["forge","advanced-topics","display-list-interrupts"]},"buildId":"CnF04P5ob_bUVxETgw2P_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>