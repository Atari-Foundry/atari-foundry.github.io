<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><title data-next-head="">functions | forge Documentation | Atari Foundry</title><meta name="description" content="forge documentation: functions" data-next-head=""/><link rel="preload" href="/images/foundry_logo_50H.png" as="image" data-next-head=""/><link rel="preload" href="/_next/static/chunks/c81f129e50a5fd79.css" as="style"/><link rel="stylesheet" href="/_next/static/chunks/c81f129e50a5fd79.css" data-n-g=""/><noscript data-n-css=""></noscript><script src="/_next/static/chunks/e8a4a4ae55bc5744.js" defer=""></script><script src="/_next/static/chunks/00dac80f236dcabb.js" defer=""></script><script src="/_next/static/chunks/44f6bc00d9aaf830.js" defer=""></script><script src="/_next/static/chunks/fd7cb30d70431a0f.js" defer=""></script><script src="/_next/static/chunks/turbopack-4769270d21ef6607.js" defer=""></script><script src="/_next/static/chunks/1b081b821847ed60.js" defer=""></script><script src="/_next/static/chunks/39b01aa8a3352426.js" defer=""></script><script src="/_next/static/chunks/b56fd671c61106a7.js" defer=""></script><script src="/_next/static/chunks/turbopack-ab1a8023ffca1f9c.js" defer=""></script><script src="/_next/static/uKcVMkypfjITnNYGcdC5l/_ssgManifest.js" defer=""></script><script src="/_next/static/uKcVMkypfjITnNYGcdC5l/_buildManifest.js" defer=""></script></head><body><div id="__next"><div class="crt"><div class="scanlines" aria-hidden="true"></div><div class="noise" aria-hidden="true"></div><nav class="nav"><a class="nav-brand" href="/"><img alt="Atari Foundry icon" width="72" height="50" decoding="async" data-nimg="1" style="color:transparent;height:40px;width:auto" src="/images/foundry_logo_50H.png"/><div><span class="nav-brand-title">Atari Foundry</span><span class="nav-brand-sub">Products for Atari 8-bit</span></div></a><ul class="nav-links"><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/vault">Vault</a></li><li class="nav-item has-children"><button type="button" class="nav-link nav-trigger active" aria-haspopup="true" aria-expanded="false">Docs</button><div class="nav-dropdown"><a class="nav-dropdown-link" href="/docs/crucible">Crucible</a><a class="nav-dropdown-link" href="/docs/atrforge">atrforge</a><a class="nav-dropdown-link" href="/docs/forge">FORGE</a></div></li><li class="nav-item"><a class="nav-link" href="/support">Support</a></li></ul></nav><header class="subhero"><p class="label">forge<!-- --> Documentation</p><h1 class="page-title">functions</h1></header><main><div class="docs-layout"><aside class="docs-sidebar"><nav class="docs-nav"><div class="docs-nav-section"><h3>Documentation</h3><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:0rem" href="/docs/forge/readme">README</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/forge/index">index</a></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">cc65</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/cc65">README</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">about</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/about/attributions">attributions</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/about/why-forge">why-forge</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">advanced topics</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/cio-reference">cio-reference</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/display-list-interrupts">display-list-interrupts</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/fujinet">fujinet</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/low-level-programming">low-level-programming</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/note-point">note-point</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/sio-operations">sio-operations</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/advanced-topics/xio-reference">xio-reference</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">getting started</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/getting-started/compiling">compiling</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/getting-started/differences">differences</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/getting-started/first-steps">first-steps</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/getting-started/introduction">introduction</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">editor</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/editor/editor-guide">editor-guide</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/editor/editor-optimization">editor-optimization</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">language reference</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/language-reference/expressions">expressions</a></li><li><a class="doc-link active" style="padding-left:1.2rem" href="/docs/forge/language-reference/functions">functions</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/language-reference/statements">statements</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/language-reference/syntax">syntax</a></li></ul></div></li><li><div class="docs-nav-section" style="margin-top:0"><h4 style="font-size:0.75rem;text-transform:uppercase;letter-spacing:0.15em;color:rgba(255, 255, 255, 0.5);margin-bottom:0.6rem;font-weight:700;padding-left:0rem">reference</h4><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/hardware-registers">hardware-registers</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/interrupts">interrupts</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/iocb-structure">iocb-structure</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/memory-map">memory-map</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/memory-usage">memory-usage</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/os-equates">os-equates</a></li><li><a class="doc-link " style="padding-left:1.2rem" href="/docs/forge/reference/r-handler">r-handler</a></li></ul></div></li></ul></div></nav></aside><div class="docs-content"><div class="docs-body"><div class="doc-markdown"><h1>Functions</h1>
<p>Functions take parameters (normally between parentheses) and return a result.</p>
<h2>Function Syntax</h2>
<h3>Abbreviations</h3>
<p>Functions can be abbreviated by using a shorter name ended in a dot, for example you can write <code>R.(10)</code> instead of <code>RAND(10)</code>.</p>
<h3>Parentheses</h3>
<p>You can also omit parentheses on functions that take only one argument, for example, <code>RAND 10</code>.</p>
<p><strong>Note:</strong> This is not possible when the function accepts a variable number of arguments (as with <code>USR</code>), or with the <code>ADR</code> function.</p>
<h3>Parameterless Functions</h3>
<p>Some functions don&#x27;t take parameters, and you must provide a set of parentheses, like <code>KEY()</code>. However, when abbreviated, you can omit the parenthesis, like <code>K.</code> for <code>KEY()</code>.</p>
<h2>Standard Functions</h2>
<p>Following is a list of all the general purpose functions supported by FORGE. Shown are the full syntax and the abbreviated syntax.</p>
<h3>TIME / T.</h3>
<p>Returns the current time in &quot;jiffies.&quot; This is about 60 times per second in NTSC systems or 50 times per second in PAL systems. Use <code>TIMER</code> statement to reset to 0.</p>
<p>Remember that this function returns an integer, so the maximum value is 32767, or about 9 minutes in NTSC, and a little less than 11 minutes in PAL, after this the value will become negative. If you need to measure more than this amount, consider using the floating-point version <code>%TIME</code>.</p>
<p><strong>Note:</strong> <code>TIME</code> is special, and does not need parentheses.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">TIMER
REPEAT
  ? TIME
  PAUSE 60
UNTIL TIME &gt; 300
</code></pre></pre>
<h3>ABS(<em>num</em>) / A.(<em>num</em>)</h3>
<p>Returns the absolute value of <em>num</em> (e.g., <code>ABS(5)</code> and <code>ABS(-5)</code> both result in <code>5</code>). Can be used with integers and floating point.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">? ABS(-10)  &#x27; Prints 10
? ABS(10)   &#x27; Prints 10
</code></pre></pre>
<h3>SGN(<em>num</em>) / SG.(<em>num</em>)</h3>
<p>Returns the sign of <em>num</em>, this is 1 if positive, -1 if negative or 0 if <em>num</em> is 0. Can be used with integers and floating point.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">? SGN(10)   &#x27; Prints 1
? SGN(-5)   &#x27; Prints -1
? SGN(0)    &#x27; Prints 0
</code></pre></pre>
<h3>RAND(<em>num</em>) / R.(<em>num</em>)</h3>
<p>Returns a random, non negative number, a maximum of 1 less than <em>num</em>. (e.g., <code>RAND(3)</code> will result in 0, 1, or 2.)</p>
<p><strong>See also:</strong> <code>RND()</code> for floating point random numbers.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">DICE = RAND(6) + 1  &#x27; Random number 1-6
</code></pre></pre>
<h3>FRE() / F.</h3>
<p>Returns the free memory available in bytes.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">? &quot;Free memory: &quot;; FRE(); &quot; bytes&quot;
</code></pre></pre>
<h3>ERR() / E.</h3>
<p>Returns the last Input/Output error value, or 1 if no error was registered.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">OPEN #1, 4, 0, &quot;D:FILE.TXT&quot;
IF ERR() &lt;&gt; 1 THEN
  ? &quot;Error opening file: &quot;; ERR()
ENDIF
</code></pre></pre>
<h3>LEN(<em>string</em>) / L.(<em>string</em>)</h3>
<p>Returns the length of the <em>string</em>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">A$ = &quot;Hello&quot;
? LEN(A$)  &#x27; Prints 5
</code></pre></pre>
<h3>VAL(<em>string</em>) / V.(<em>string</em>)</h3>
<p>Converts <em>string</em> to a number. If no conversion is possible, <code>ERR()</code> is set to 18. Can be used with integers and floating point.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">A$ = &quot;123&quot;
N = VAL(A$)
? N  &#x27; Prints 123
</code></pre></pre>
<h3>ASC(<em>string</em>) / AS.(<em>string</em>)</h3>
<p>Returns the ATASCII code of the first character of the <em>string</em>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">? ASC(&quot;A&quot;)  &#x27; Prints 65
</code></pre></pre>
<h2>Atari Specific Functions</h2>
<p>The following functions allow interacting with the Atari hardware to read controller and keyboard input and to program with Player/Missile graphics.</p>
<h3>PADDLE(<em>n</em>) / PA.(<em>n</em>)</h3>
<p>Returns the value of the PADDLE controller <em>n</em>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">P0 = PADDLE(0)  &#x27; Horizontal axis of paddle 0
P1 = PADDLE(1)  &#x27; Vertical axis of paddle 0
</code></pre></pre>
<h3>PMADR(<em>n</em>) / PM.(<em>n</em>)</h3>
<p>Returns the address of the data for Player <em>n</em> or the address of the Missiles with <em>n</em> = -1.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">PMGRAPHICS 2
ADDR = PMADR(0)  &#x27; Address of Player 0 data
</code></pre></pre>
<h3>PTRIG(<em>n</em>) / PT.(<em>n</em>)</h3>
<p>Returns 0 if the PADDLE controller <em>n</em> button is pressed, 1 otherwise.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">IF PTRIG(0) = 0 THEN ? &quot;Button pressed&quot;
</code></pre></pre>
<h3>STICK(<em>n</em>) / S.(<em>n</em>)</h3>
<p>Returns the JOYSTICK controller <em>n</em> position. <code>STICK(_n_)</code> values are:</p>
<pre><code>10  14   6

11  15   7

 9  13   5
</code></pre>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">DIR = STICK(0)
IF DIR = 14 THEN ? &quot;Up&quot;
IF DIR = 13 THEN ? &quot;Down&quot;
</code></pre></pre>
<h3>STRIG(<em>n</em>) / STR.(<em>n</em>)</h3>
<p>Returns 0 if JOYSTICK controller <em>n</em> button is pressed, 1 otherwise.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">IF STRIG(0) = 0 THEN ? &quot;Fire!&quot;
</code></pre></pre>
<h3>KEY() / K.</h3>
<p>Returns 0 if no key was pressed, or a key code. The returned value only goes to 0 after reading the key in the OS (via a <code>GET</code> or <code>POKE 764, 255</code> statement).</p>
<p><strong>Hint:</strong> The value returned is actually the same as <code>(PEEK(764) EXOR 255)</code>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">PRINT &quot;Press keys, exit with ESC&quot;
REPEAT
  REPEAT : UNTIL KEY()
  PRINT &quot;Key code: &quot;; KEY()
  GET K
  PRINT &quot;ATASCII code: &quot;; K
UNTIL K=27
</code></pre></pre>
<p><strong>Note:</strong> Some keys on the Atari -- the console keys <code>START</code>, <code>SELECT</code>, and <code>OPTION</code>; modifiers <code>SHIFT</code> and <code>CONTROL</code>; and the <code>HELP</code>, <code>BREAK</code>, and <code>RESET</code> keys -- are not handled in the same way as the main keyboard, and cannot be read by <code>GET</code>.</p>
<p><strong>Hints:</strong></p>
<ul>
<li>The status of all three console keys may be read via the GTIA <code>CONSOL</code> register, <code>PEEK(53279)</code>.</li>
<li>Whether the <code>HELP</code> key is pressed can be detected via the POKEY <code>KBCODE</code> register, <code>PEEK(53769)</code>.</li>
<li>Whether either <code>SHIFT</code> key is pressed can be detected via the POKEY <code>SKCTL</code> register, <code>PEEK(53775)</code>.</li>
</ul>
<h2>R: Device Status Functions</h2>
<p>The following functions provide easy access to status information for R: devices (Atari 850 Interface Module, R:Verter, BOB-Verter). These functions automatically call <code>STATUS</code> on the specified channel and return the requested information from the DVSTAT buffer.</p>
<p>All functions take a channel number as their parameter and return 0 if the STATUS call fails.</p>
<h3>Checking Carrier Status</h3>
<p>To check if carrier is active, use <code>(PEEK(747) AND 8) &lt;&gt; 0</code> after calling <code>STATUS</code>. This checks bit 3 of DVSTAT[1], which works with both Atari 850 and verter-style handlers.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">OPEN #1,12,0,&quot;R1:&quot;
STATUS #1, ST
IF ST = 1 AND (PEEK(747) AND 8) &lt;&gt; 0 THEN
  ? &quot;Connection active&quot;
ELSE
  ? &quot;No carrier&quot;
ENDIF
</code></pre></pre>
<h3>Error Bits</h3>
<p>To get error bits, use <code>PEEK(746)</code> after calling <code>STATUS</code>. Each bit represents a different error condition (bit 7=framing, bit 6=overrun, bit 5=parity, bit 4=overflow, etc.).</p>
<h3>Sense Byte</h3>
<p>To get the sense byte, use <code>PEEK(747)</code> after calling <code>STATUS</code>. The meaning depends on whether concurrent mode is active.</p>
<h3>Buffer Counts</h3>
<p>To get buffer counts when concurrent mode is active, use <code>PEEK(747) + 256 * PEEK(748)</code> for input buffer count and <code>PEEK(749)</code> for output buffer count after calling <code>STATUS</code>.</p>
<h2>Floating Point Functions</h2>
<p>These functions use floating point values, and are only available in the floating point version.</p>
<p>In case of errors (such as logarithm or square root of negative numbers and overflow in the results), the functions will return an invalid value, and the <code>ERR()</code> function returns 3.</p>
<h3>ATN(<em>n</em>) / AT.(<em>n</em>)</h3>
<p>Arc-Tangent of <em>n</em>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">ANGLE = ATN(1.0)  &#x27; Returns approximately PI/4
</code></pre></pre>
<h3>COS(<em>n</em>) / CO.(<em>n</em>)</h3>
<p>Cosine of <em>n</em>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">V = COS(0)  &#x27; Returns 1.0
</code></pre></pre>
<h3>EXP(<em>n</em>)</h3>
<p>Natural exponentiation (e raised to <em>n</em>).</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">V = EXP(1.0)  &#x27; Returns approximately 2.718
</code></pre></pre>
<h3>EXP10(<em>n</em>) / EX.(<em>n</em>)</h3>
<p>Returns ten raised to <em>n</em>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">V = EXP10(2)  &#x27; Returns 100.0
</code></pre></pre>
<h3>INT(<em>num</em>) / I.(<em>num</em>)</h3>
<p>Converts the floating point number <em>num</em> to the nearest integer from -32768 to 32767.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">N = INT(3.7)  &#x27; Returns 4
N = INT(-3.7) &#x27; Returns -4
</code></pre></pre>
<h3>LOG(<em>n</em>)</h3>
<p>Natural logarithm of <em>n</em>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">V = LOG(2.718)  &#x27; Returns approximately 1.0
</code></pre></pre>
<h3>LOG10(<em>n</em>) / LO.(<em>n</em>)</h3>
<p>Decimal logarithm of <em>n</em>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">V = LOG10(100)  &#x27; Returns 2.0
</code></pre></pre>
<h3>RND() / RN.</h3>
<p>Returns a random positive number strictly less than 1.</p>
<p><strong>See also:</strong> <code>RAND()</code> for integer random numbers.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">R = RND()  &#x27; Random number 0.0 to 0.999...
</code></pre></pre>
<h3>SIN(<em>n</em>) / SI.(<em>n</em>)</h3>
<p>Sine of <em>n</em>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">V = SIN(0)  &#x27; Returns 0.0
</code></pre></pre>
<h3>SQR(<em>n</em>) / SQ.(<em>n</em>)</h3>
<p>Square root of <em>n</em>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">V = SQR(16)  &#x27; Returns 4.0
</code></pre></pre>
<h3>%TIME / %T.</h3>
<p>This is the same as the <code>TIME</code> integer function, but returning a 24 bit number that does not wrap until more than 3 days.</p>
<p><strong>Note:</strong> Don&#x27;t use the <code>TIMER</code> statement if you are using this function, as the returned value will be invalid.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">TIMER
? %TIME  &#x27; 24-bit time value
</code></pre></pre>
<h2>String Functions</h2>
<h3>STR$(<em>num</em>)</h3>
<p>Returns a string with a printable value for <em>num</em>. Can be used with integers and floating point.</p>
<p><strong>Note:</strong> This function can&#x27;t be used at both sides of a comparison, as the resulting string is overwritten each time it is called.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">A$ = STR$(123)  &#x27; A$ = &quot;123&quot;
B$ = STR$(3.14) &#x27; B$ = &quot;3.14&quot;
</code></pre></pre>
<h3>CHR$(<em>num</em>)</h3>
<p>Converts <em>num</em> to a one character string with the ATASCII value.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">A$ = CHR$(65)  &#x27; A$ = &quot;A&quot;
</code></pre></pre>
<h2>Low Level Functions</h2>
<p>The following functions are called &quot;low level&quot; because they interact directly with the hardware. <strong>Use with care!</strong></p>
<h3>ADR(<em>arr</em>) / &amp;<em>arr</em></h3>
<p>Returns the address of the first element of <em>arr</em> in memory. Following elements of the array occupy adjacent memory locations.</p>
<p>Instead of <code>ADR(X)</code> you can simply type <code>&amp;X</code>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">DIM A(10)
ADDR = ADR(A)  &#x27; or ADDR = &amp;A
</code></pre></pre>
<h3>ADR(<em>str</em>) / &amp;<em>str</em></h3>
<p>Returns the address of the <em>string</em> in memory. The first memory location contains the length of the string, and following locations contain the string characters.</p>
<p><strong>Note:</strong> This differs from Atari BASIC and TurboBASIC XL, where the address returned points to the first character of the string.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">A$ = &quot;Hello&quot;
ADDR = ADR(A$)  &#x27; Address of string structure
</code></pre></pre>
<h3>ADR(<em>var</em>) / &amp;<em>var</em></h3>
<p>Returns the address of the <em>variable</em> in memory.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">X = 100
ADDR = ADR(X)  &#x27; Address of variable X
</code></pre></pre>
<h3>DPEEK(<em>addr</em>) / D.(<em>addr</em>)</h3>
<p>Returns the value of memory location <em>addr</em> and <em>addr</em>+1 as a 16 bit integer.</p>
<p>This is the same as doing <code>PEEK(_addr_)+PEEK(_addr_+1)*256</code>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">V = DPEEK(560)  &#x27; Read 16-bit value at address 560
</code></pre></pre>
<h3>DVSTAT(<em>index</em>) / DVS.(<em>index</em>)</h3>
<p>Reads a byte from the DVSTAT buffer (device status buffer at memory locations 746-749). The <em>index</em> parameter must be 0, 1, 2, or 3, corresponding to DVSTAT[0] through DVSTAT[3].</p>
<p>This function is used to read device-specific status information after calling <code>STATUS</code> on a device channel. The meaning of each byte depends on the device handler:</p>
<ul>
<li><code>DVSTAT(0)</code> - Error bits (bitfield)</li>
<li><code>DVSTAT(1)</code> - Sense byte or buffer count low byte</li>
<li><code>DVSTAT(2)</code> - Buffer count high byte (usually 0)</li>
<li><code>DVSTAT(3)</code> - Output buffer count</li>
</ul>
<p>For R: devices (Atari 850, R:Verter, BOB-Verter), see the helper functions above for easier access to common status information.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">STATUS #1, ST
IF ST = 1 THEN
  ERR_BITS = DVSTAT(0)
  SENSE = DVSTAT(1)
ENDIF
</code></pre></pre>
<h3>PEEK(<em>address</em>) / P.(<em>address</em>)</h3>
<p>Returns the value of memory location at <em>address</em>.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">V = PEEK(53279)  &#x27; Read CONSOL register
</code></pre></pre>
<h3>USR(<em>address</em>[,<em>num1</em> ...])</h3>
<p>Low level function that calls the user supplied machine code subroutine at <em>address</em>.</p>
<p>Parameters are pushed to the CPU stack, with the LOW part pushed first, so the first PLA returns the HIGH part of the last parameter, and so on.</p>
<p>The value of <code>A</code> and <code>X</code> registers is used as a return value of the function, with <code>A</code> the low part and <code>X</code> the high part.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">&#x27; PLA / EOR $FF / TAX / PLA / EOR $FF / RTS
DATA ml() byte = $68,$49,$FF,$AA,$68,$49,$FF,$60
FOR i=0 TO 1000 STEP 100
  ? i, USR(ADR(ml),i)
NEXT i
</code></pre></pre>
<h3>$(<em>addr</em>)</h3>
<p>Returns the string at memory address <em>addr</em>.</p>
<p>This is the inverse of <code>ADR()</code>, and can be used to create arbitrary strings in memory.</p>
<p><strong>Example:</strong></p>
<pre><pre class="language-basic"><code class="language-basic">DATA x() byte = 2, $41, $42
? $( ADR(x) )  &#x27; Prints &quot;AB&quot;
</code></pre></pre>
<p>You can also store string addresses to reuse later, using less memory than copying the full string:</p>
<pre><pre class="language-basic"><code class="language-basic">x = ADR(&quot;Hello&quot;)
? $( x )  &#x27; Prints &quot;Hello&quot;
</code></pre></pre>
<h3>%(<em>n</em>)</h3>
<p>This returns the floating-point value stored at memory address <em>n</em>.</p>
<p>This function is special, as it is possible to use it also at the left side of an assignment, to store a floating point into an address:</p>
<pre><pre class="language-basic"><code class="language-basic">%(1536) = 0.1234
? %(1536)  &#x27; Prints 0.1234
</code></pre></pre>
<h2>Function Reference Table</h2>
<table><thead><tr><th>Function</th><th>Abbreviation</th><th>Type</th><th>Parameters</th><th>Description</th></tr></thead><tbody><tr><td>TIME</td><td>T.</td><td>Integer</td><td>None</td><td>Current time in jiffies</td></tr><tr><td>ABS</td><td>A.</td><td>Numeric</td><td>Number</td><td>Absolute value</td></tr><tr><td>SGN</td><td>SG.</td><td>Numeric</td><td>Number</td><td>Sign (-1, 0, or 1)</td></tr><tr><td>RAND</td><td>R.</td><td>Integer</td><td>Max</td><td>Random integer</td></tr><tr><td>FRE</td><td>F.</td><td>Integer</td><td>None</td><td>Free memory in bytes</td></tr><tr><td>ERR</td><td>E.</td><td>Integer</td><td>None</td><td>Last I/O error</td></tr><tr><td>LEN</td><td>L.</td><td>Integer</td><td>String</td><td>String length</td></tr><tr><td>VAL</td><td>V.</td><td>Numeric</td><td>String</td><td>Convert string to number</td></tr><tr><td>ASC</td><td>AS.</td><td>Integer</td><td>String</td><td>ATASCII code of first char</td></tr><tr><td>PADDLE</td><td>PA.</td><td>Integer</td><td>Controller #</td><td>Paddle value</td></tr><tr><td>PMADR</td><td>PM.</td><td>Integer</td><td>Player #</td><td>Player/Missile address</td></tr><tr><td>PTRIG</td><td>PT.</td><td>Integer</td><td>Controller #</td><td>Paddle trigger state</td></tr><tr><td>STICK</td><td>S.</td><td>Integer</td><td>Controller #</td><td>Joystick position</td></tr><tr><td>STRIG</td><td>STR.</td><td>Integer</td><td>Controller #</td><td>Joystick trigger state</td></tr><tr><td>KEY</td><td>K.</td><td>Integer</td><td>None</td><td>Key code</td></tr><tr><td>ATN</td><td>AT.</td><td>Float</td><td>Number</td><td>Arc-tangent</td></tr><tr><td>COS</td><td>CO.</td><td>Float</td><td>Number</td><td>Cosine</td></tr><tr><td>EXP</td><td>-</td><td>Float</td><td>Number</td><td>Natural exponent</td></tr><tr><td>EXP10</td><td>EX.</td><td>Float</td><td>Number</td><td>10 raised to power</td></tr><tr><td>INT</td><td>I.</td><td>Integer</td><td>Float</td><td>Convert to integer</td></tr><tr><td>LOG</td><td>-</td><td>Float</td><td>Number</td><td>Natural logarithm</td></tr><tr><td>LOG10</td><td>LO.</td><td>Float</td><td>Number</td><td>Decimal logarithm</td></tr><tr><td>RND</td><td>RN.</td><td>Float</td><td>None</td><td>Random 0.0-1.0</td></tr><tr><td>SIN</td><td>SI.</td><td>Float</td><td>Number</td><td>Sine</td></tr><tr><td>SQR</td><td>SQ.</td><td>Float</td><td>Number</td><td>Square root</td></tr><tr><td>%TIME</td><td>%T.</td><td>Integer</td><td>None</td><td>24-bit time</td></tr><tr><td>STR$</td><td>-</td><td>String</td><td>Number</td><td>Convert to string</td></tr><tr><td>CHR$</td><td>-</td><td>String</td><td>Number</td><td>ATASCII to character</td></tr><tr><td>ADR</td><td>&amp;</td><td>Integer</td><td>Variable</td><td>Memory address</td></tr><tr><td>DPEEK</td><td>D.</td><td>Integer</td><td>Address</td><td>Read 16-bit value</td></tr><tr><td>DVSTAT</td><td>DVS.</td><td>Integer</td><td>Index</td><td>DVSTAT buffer byte</td></tr><tr><td>PEEK</td><td>P.</td><td>Integer</td><td>Address</td><td>Read byte</td></tr><tr><td>USR</td><td>-</td><td>Integer</td><td>Address, ...</td><td>Call machine code</td></tr><tr><td>$</td><td>-</td><td>String</td><td>Address</td><td>String at address</td></tr><tr><td>%</td><td>-</td><td>Float</td><td>Address</td><td>Float at address</td></tr></tbody></table>
<h2>Next Steps</h2>
<ul>
<li><a node="[object Object]" href="/docs/forge/statements">Statements</a> - Complete statement reference</li>
<li><a node="[object Object]" href="/docs/forge/expressions">Expressions</a> - Expression operators and types</li>
<li><a node="[object Object]" href="/docs/forge/language-reference/advanced-topics/low-level-programming">Low-Level Programming</a> - Advanced memory operations</li>
</ul></div></div></div></div></main><footer class="footer"><p>© 2026 Atari Foundry · Rick Collette · Software for Atari 8-bit builders.</p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"product":"forge","productDocs":{"product":"forge","files":[{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/cc65/README.md","relativePath":"cc65/README.md","relativeDir":"cc65","filename":"README","slug":"readme","name":"README"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/README.md","relativePath":"README.md","relativeDir":"","filename":"README","slug":"readme","name":"README"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/attributions.md","relativePath":"about/attributions.md","relativeDir":"about","filename":"attributions","slug":"attributions","name":"attributions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/cio-reference.md","relativePath":"advanced-topics/cio-reference.md","relativeDir":"advanced-topics","filename":"cio-reference","slug":"cio-reference","name":"cio-reference"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/compiling.md","relativePath":"getting-started/compiling.md","relativeDir":"getting-started","filename":"compiling","slug":"compiling","name":"compiling"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/differences.md","relativePath":"getting-started/differences.md","relativeDir":"getting-started","filename":"differences","slug":"differences","name":"differences"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/display-list-interrupts.md","relativePath":"advanced-topics/display-list-interrupts.md","relativeDir":"advanced-topics","filename":"display-list-interrupts","slug":"display-list-interrupts","name":"display-list-interrupts"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-guide.md","relativePath":"editor/editor-guide.md","relativeDir":"editor","filename":"editor-guide","slug":"editor-guide","name":"editor-guide"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-optimization.md","relativePath":"editor/editor-optimization.md","relativeDir":"editor","filename":"editor-optimization","slug":"editor-optimization","name":"editor-optimization"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/expressions.md","relativePath":"language-reference/expressions.md","relativeDir":"language-reference","filename":"expressions","slug":"expressions","name":"expressions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/first-steps.md","relativePath":"getting-started/first-steps.md","relativeDir":"getting-started","filename":"first-steps","slug":"first-steps","name":"first-steps"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/fujinet.md","relativePath":"advanced-topics/fujinet.md","relativeDir":"advanced-topics","filename":"fujinet","slug":"fujinet","name":"fujinet"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/functions.md","relativePath":"language-reference/functions.md","relativeDir":"language-reference","filename":"functions","slug":"functions","name":"functions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/hardware-registers.md","relativePath":"reference/hardware-registers.md","relativeDir":"reference","filename":"hardware-registers","slug":"hardware-registers","name":"hardware-registers"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/index.md","relativePath":"index.md","relativeDir":"","filename":"index","slug":"index","name":"index"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/interrupts.md","relativePath":"reference/interrupts.md","relativeDir":"reference","filename":"interrupts","slug":"interrupts","name":"interrupts"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/introduction.md","relativePath":"getting-started/introduction.md","relativeDir":"getting-started","filename":"introduction","slug":"introduction","name":"introduction"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/iocb-structure.md","relativePath":"reference/iocb-structure.md","relativeDir":"reference","filename":"iocb-structure","slug":"iocb-structure","name":"iocb-structure"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/low-level-programming.md","relativePath":"advanced-topics/low-level-programming.md","relativeDir":"advanced-topics","filename":"low-level-programming","slug":"low-level-programming","name":"low-level-programming"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-map.md","relativePath":"reference/memory-map.md","relativeDir":"reference","filename":"memory-map","slug":"memory-map","name":"memory-map"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-usage.md","relativePath":"reference/memory-usage.md","relativeDir":"reference","filename":"memory-usage","slug":"memory-usage","name":"memory-usage"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/note-point.md","relativePath":"advanced-topics/note-point.md","relativeDir":"advanced-topics","filename":"note-point","slug":"note-point","name":"note-point"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/os-equates.md","relativePath":"reference/os-equates.md","relativeDir":"reference","filename":"os-equates","slug":"os-equates","name":"os-equates"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/r-handler.md","relativePath":"reference/r-handler.md","relativeDir":"reference","filename":"r-handler","slug":"r-handler","name":"r-handler"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/sio-operations.md","relativePath":"advanced-topics/sio-operations.md","relativeDir":"advanced-topics","filename":"sio-operations","slug":"sio-operations","name":"sio-operations"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/statements.md","relativePath":"language-reference/statements.md","relativeDir":"language-reference","filename":"statements","slug":"statements","name":"statements"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/syntax.md","relativePath":"language-reference/syntax.md","relativeDir":"language-reference","filename":"syntax","slug":"syntax","name":"syntax"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/why-forge.md","relativePath":"about/why-forge.md","relativeDir":"about","filename":"why-forge","slug":"why-forge","name":"why-forge"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/xio-reference.md","relativePath":"advanced-topics/xio-reference.md","relativeDir":"advanced-topics","filename":"xio-reference","slug":"xio-reference","name":"xio-reference"}],"navTree":{"cc65":{"_files":[{"name":"README","slug":"readme","path":"cc65/README.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/cc65/README.md","isIndex":true}]},"_files":[{"name":"README","slug":"readme","path":"README.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/README.md","isIndex":true},{"name":"index","slug":"index","path":"index.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/index.md","isIndex":false}],"about":{"_files":[{"name":"attributions","slug":"attributions","path":"about/attributions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/attributions.md","isIndex":false},{"name":"why-forge","slug":"why-forge","path":"about/why-forge.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/why-forge.md","isIndex":false}]},"advanced-topics":{"_files":[{"name":"cio-reference","slug":"cio-reference","path":"advanced-topics/cio-reference.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/cio-reference.md","isIndex":false},{"name":"display-list-interrupts","slug":"display-list-interrupts","path":"advanced-topics/display-list-interrupts.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/display-list-interrupts.md","isIndex":false},{"name":"fujinet","slug":"fujinet","path":"advanced-topics/fujinet.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/fujinet.md","isIndex":false},{"name":"low-level-programming","slug":"low-level-programming","path":"advanced-topics/low-level-programming.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/low-level-programming.md","isIndex":false},{"name":"note-point","slug":"note-point","path":"advanced-topics/note-point.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/note-point.md","isIndex":false},{"name":"sio-operations","slug":"sio-operations","path":"advanced-topics/sio-operations.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/sio-operations.md","isIndex":false},{"name":"xio-reference","slug":"xio-reference","path":"advanced-topics/xio-reference.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/xio-reference.md","isIndex":false}]},"getting-started":{"_files":[{"name":"compiling","slug":"compiling","path":"getting-started/compiling.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/compiling.md","isIndex":false},{"name":"differences","slug":"differences","path":"getting-started/differences.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/differences.md","isIndex":false},{"name":"first-steps","slug":"first-steps","path":"getting-started/first-steps.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/first-steps.md","isIndex":false},{"name":"introduction","slug":"introduction","path":"getting-started/introduction.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/introduction.md","isIndex":false}]},"editor":{"_files":[{"name":"editor-guide","slug":"editor-guide","path":"editor/editor-guide.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-guide.md","isIndex":false},{"name":"editor-optimization","slug":"editor-optimization","path":"editor/editor-optimization.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-optimization.md","isIndex":false}]},"language-reference":{"_files":[{"name":"expressions","slug":"expressions","path":"language-reference/expressions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/expressions.md","isIndex":false},{"name":"functions","slug":"functions","path":"language-reference/functions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/functions.md","isIndex":false},{"name":"statements","slug":"statements","path":"language-reference/statements.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/statements.md","isIndex":false},{"name":"syntax","slug":"syntax","path":"language-reference/syntax.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/syntax.md","isIndex":false}]},"reference":{"_files":[{"name":"hardware-registers","slug":"hardware-registers","path":"reference/hardware-registers.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/hardware-registers.md","isIndex":false},{"name":"interrupts","slug":"interrupts","path":"reference/interrupts.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/interrupts.md","isIndex":false},{"name":"iocb-structure","slug":"iocb-structure","path":"reference/iocb-structure.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/iocb-structure.md","isIndex":false},{"name":"memory-map","slug":"memory-map","path":"reference/memory-map.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-map.md","isIndex":false},{"name":"memory-usage","slug":"memory-usage","path":"reference/memory-usage.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-usage.md","isIndex":false},{"name":"os-equates","slug":"os-equates","path":"reference/os-equates.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/os-equates.md","isIndex":false},{"name":"r-handler","slug":"r-handler","path":"reference/r-handler.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/r-handler.md","isIndex":false}]}}},"docFile":{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/functions.md","relativePath":"language-reference/functions.md","relativeDir":"language-reference","filename":"functions","slug":"functions","name":"functions","content":"# Functions\n\nFunctions take parameters (normally between parentheses) and return a result.\n\n## Function Syntax\n\n### Abbreviations\n\nFunctions can be abbreviated by using a shorter name ended in a dot, for example you can write `R.(10)` instead of `RAND(10)`.\n\n### Parentheses\n\nYou can also omit parentheses on functions that take only one argument, for example, `RAND 10`.\n\n**Note:** This is not possible when the function accepts a variable number of arguments (as with `USR`), or with the `ADR` function.\n\n### Parameterless Functions\n\nSome functions don't take parameters, and you must provide a set of parentheses, like `KEY()`. However, when abbreviated, you can omit the parenthesis, like `K.` for `KEY()`.\n\n## Standard Functions\n\nFollowing is a list of all the general purpose functions supported by FORGE. Shown are the full syntax and the abbreviated syntax.\n\n### TIME / T.\n\nReturns the current time in \"jiffies.\" This is about 60 times per second in NTSC systems or 50 times per second in PAL systems. Use `TIMER` statement to reset to 0.\n\nRemember that this function returns an integer, so the maximum value is 32767, or about 9 minutes in NTSC, and a little less than 11 minutes in PAL, after this the value will become negative. If you need to measure more than this amount, consider using the floating-point version `%TIME`.\n\n**Note:** `TIME` is special, and does not need parentheses.\n\n**Example:**\n```basic\nTIMER\nREPEAT\n  ? TIME\n  PAUSE 60\nUNTIL TIME \u003e 300\n```\n\n### ABS(_num_) / A.(_num_)\n\nReturns the absolute value of _num_ (e.g., `ABS(5)` and `ABS(-5)` both result in `5`). Can be used with integers and floating point.\n\n**Example:**\n```basic\n? ABS(-10)  ' Prints 10\n? ABS(10)   ' Prints 10\n```\n\n### SGN(_num_) / SG.(_num_)\n\nReturns the sign of _num_, this is 1 if positive, -1 if negative or 0 if _num_ is 0. Can be used with integers and floating point.\n\n**Example:**\n```basic\n? SGN(10)   ' Prints 1\n? SGN(-5)   ' Prints -1\n? SGN(0)    ' Prints 0\n```\n\n### RAND(_num_) / R.(_num_)\n\nReturns a random, non negative number, a maximum of 1 less than _num_. (e.g., `RAND(3)` will result in 0, 1, or 2.)\n\n**See also:** `RND()` for floating point random numbers.\n\n**Example:**\n```basic\nDICE = RAND(6) + 1  ' Random number 1-6\n```\n\n### FRE() / F.\n\nReturns the free memory available in bytes.\n\n**Example:**\n```basic\n? \"Free memory: \"; FRE(); \" bytes\"\n```\n\n### ERR() / E.\n\nReturns the last Input/Output error value, or 1 if no error was registered.\n\n**Example:**\n```basic\nOPEN #1, 4, 0, \"D:FILE.TXT\"\nIF ERR() \u003c\u003e 1 THEN\n  ? \"Error opening file: \"; ERR()\nENDIF\n```\n\n### LEN(*string*) / L.(*string*)\n\nReturns the length of the *string*.\n\n**Example:**\n```basic\nA$ = \"Hello\"\n? LEN(A$)  ' Prints 5\n```\n\n### VAL(*string*) / V.(*string*)\n\nConverts *string* to a number. If no conversion is possible, `ERR()` is set to 18. Can be used with integers and floating point.\n\n**Example:**\n```basic\nA$ = \"123\"\nN = VAL(A$)\n? N  ' Prints 123\n```\n\n### ASC(*string*) / AS.(*string*)\n\nReturns the ATASCII code of the first character of the *string*.\n\n**Example:**\n```basic\n? ASC(\"A\")  ' Prints 65\n```\n\n## Atari Specific Functions\n\nThe following functions allow interacting with the Atari hardware to read controller and keyboard input and to program with Player/Missile graphics.\n\n### PADDLE(_n_) / PA.(_n_)\n\nReturns the value of the PADDLE controller _n_.\n\n**Example:**\n```basic\nP0 = PADDLE(0)  ' Horizontal axis of paddle 0\nP1 = PADDLE(1)  ' Vertical axis of paddle 0\n```\n\n### PMADR(_n_) / PM.(_n_)\n\nReturns the address of the data for Player _n_ or the address of the Missiles with _n_ = -1.\n\n**Example:**\n```basic\nPMGRAPHICS 2\nADDR = PMADR(0)  ' Address of Player 0 data\n```\n\n### PTRIG(_n_) / PT.(_n_)\n\nReturns 0 if the PADDLE controller _n_ button is pressed, 1 otherwise.\n\n**Example:**\n```basic\nIF PTRIG(0) = 0 THEN ? \"Button pressed\"\n```\n\n### STICK(_n_) / S.(_n_)\n\nReturns the JOYSTICK controller _n_ position. `STICK(_n_)` values are:\n\n```\n10  14   6\n\n11  15   7\n\n 9  13   5\n```\n\n**Example:**\n```basic\nDIR = STICK(0)\nIF DIR = 14 THEN ? \"Up\"\nIF DIR = 13 THEN ? \"Down\"\n```\n\n### STRIG(_n_) / STR.(_n_)\n\nReturns 0 if JOYSTICK controller _n_ button is pressed, 1 otherwise.\n\n**Example:**\n```basic\nIF STRIG(0) = 0 THEN ? \"Fire!\"\n```\n\n### KEY() / K.\n\nReturns 0 if no key was pressed, or a key code. The returned value only goes to 0 after reading the key in the OS (via a `GET` or `POKE 764, 255` statement).\n\n**Hint:** The value returned is actually the same as `(PEEK(764) EXOR 255)`.\n\n**Example:**\n```basic\nPRINT \"Press keys, exit with ESC\"\nREPEAT\n  REPEAT : UNTIL KEY()\n  PRINT \"Key code: \"; KEY()\n  GET K\n  PRINT \"ATASCII code: \"; K\nUNTIL K=27\n```\n\n**Note:** Some keys on the Atari -- the console keys `START`, `SELECT`, and `OPTION`; modifiers `SHIFT` and `CONTROL`; and the `HELP`, `BREAK`, and `RESET` keys -- are not handled in the same way as the main keyboard, and cannot be read by `GET`.\n\n**Hints:**\n- The status of all three console keys may be read via the GTIA `CONSOL` register, `PEEK(53279)`.\n- Whether the `HELP` key is pressed can be detected via the POKEY `KBCODE` register, `PEEK(53769)`.\n- Whether either `SHIFT` key is pressed can be detected via the POKEY `SKCTL` register, `PEEK(53775)`.\n\n## R: Device Status Functions\n\nThe following functions provide easy access to status information for R: devices (Atari 850 Interface Module, R:Verter, BOB-Verter). These functions automatically call `STATUS` on the specified channel and return the requested information from the DVSTAT buffer.\n\nAll functions take a channel number as their parameter and return 0 if the STATUS call fails.\n\n### Checking Carrier Status\n\nTo check if carrier is active, use `(PEEK(747) AND 8) \u003c\u003e 0` after calling `STATUS`. This checks bit 3 of DVSTAT[1], which works with both Atari 850 and verter-style handlers.\n\n**Example:**\n```basic\nOPEN #1,12,0,\"R1:\"\nSTATUS #1, ST\nIF ST = 1 AND (PEEK(747) AND 8) \u003c\u003e 0 THEN\n  ? \"Connection active\"\nELSE\n  ? \"No carrier\"\nENDIF\n```\n\n### Error Bits\n\nTo get error bits, use `PEEK(746)` after calling `STATUS`. Each bit represents a different error condition (bit 7=framing, bit 6=overrun, bit 5=parity, bit 4=overflow, etc.).\n\n### Sense Byte\n\nTo get the sense byte, use `PEEK(747)` after calling `STATUS`. The meaning depends on whether concurrent mode is active.\n\n### Buffer Counts\n\nTo get buffer counts when concurrent mode is active, use `PEEK(747) + 256 * PEEK(748)` for input buffer count and `PEEK(749)` for output buffer count after calling `STATUS`.\n\n## Floating Point Functions\n\nThese functions use floating point values, and are only available in the floating point version.\n\nIn case of errors (such as logarithm or square root of negative numbers and overflow in the results), the functions will return an invalid value, and the `ERR()` function returns 3.\n\n### ATN(_n_) / AT.(_n_)\n\nArc-Tangent of _n_.\n\n**Example:**\n```basic\nANGLE = ATN(1.0)  ' Returns approximately PI/4\n```\n\n### COS(_n_) / CO.(_n_)\n\nCosine of _n_.\n\n**Example:**\n```basic\nV = COS(0)  ' Returns 1.0\n```\n\n### EXP(_n_)\n\nNatural exponentiation (e raised to _n_).\n\n**Example:**\n```basic\nV = EXP(1.0)  ' Returns approximately 2.718\n```\n\n### EXP10(_n_) / EX.(_n_)\n\nReturns ten raised to _n_.\n\n**Example:**\n```basic\nV = EXP10(2)  ' Returns 100.0\n```\n\n### INT(_num_) / I.(_num_)\n\nConverts the floating point number _num_ to the nearest integer from -32768 to 32767.\n\n**Example:**\n```basic\nN = INT(3.7)  ' Returns 4\nN = INT(-3.7) ' Returns -4\n```\n\n### LOG(_n_)\n\nNatural logarithm of _n_.\n\n**Example:**\n```basic\nV = LOG(2.718)  ' Returns approximately 1.0\n```\n\n### LOG10(_n_) / LO.(_n_)\n\nDecimal logarithm of _n_.\n\n**Example:**\n```basic\nV = LOG10(100)  ' Returns 2.0\n```\n\n### RND() / RN.\n\nReturns a random positive number strictly less than 1.\n\n**See also:** `RAND()` for integer random numbers.\n\n**Example:**\n```basic\nR = RND()  ' Random number 0.0 to 0.999...\n```\n\n### SIN(_n_) / SI.(_n_)\n\nSine of _n_.\n\n**Example:**\n```basic\nV = SIN(0)  ' Returns 0.0\n```\n\n### SQR(_n_) / SQ.(_n_)\n\nSquare root of _n_.\n\n**Example:**\n```basic\nV = SQR(16)  ' Returns 4.0\n```\n\n### %TIME / %T.\n\nThis is the same as the `TIME` integer function, but returning a 24 bit number that does not wrap until more than 3 days.\n\n**Note:** Don't use the `TIMER` statement if you are using this function, as the returned value will be invalid.\n\n**Example:**\n```basic\nTIMER\n? %TIME  ' 24-bit time value\n```\n\n## String Functions\n\n### STR$(_num_)\n\nReturns a string with a printable value for _num_. Can be used with integers and floating point.\n\n**Note:** This function can't be used at both sides of a comparison, as the resulting string is overwritten each time it is called.\n\n**Example:**\n```basic\nA$ = STR$(123)  ' A$ = \"123\"\nB$ = STR$(3.14) ' B$ = \"3.14\"\n```\n\n### CHR$(_num_)\n\nConverts _num_ to a one character string with the ATASCII value.\n\n**Example:**\n```basic\nA$ = CHR$(65)  ' A$ = \"A\"\n```\n\n## Low Level Functions\n\nThe following functions are called \"low level\" because they interact directly with the hardware. **Use with care!**\n\n### ADR(_arr_) / \u0026_arr_\n\nReturns the address of the first element of _arr_ in memory. Following elements of the array occupy adjacent memory locations.\n\nInstead of `ADR(X)` you can simply type `\u0026X`.\n\n**Example:**\n```basic\nDIM A(10)\nADDR = ADR(A)  ' or ADDR = \u0026A\n```\n\n### ADR(_str_) / \u0026_str_\n\nReturns the address of the _string_ in memory. The first memory location contains the length of the string, and following locations contain the string characters.\n\n**Note:** This differs from Atari BASIC and TurboBASIC XL, where the address returned points to the first character of the string.\n\n**Example:**\n```basic\nA$ = \"Hello\"\nADDR = ADR(A$)  ' Address of string structure\n```\n\n### ADR(_var_) / \u0026_var_\n\nReturns the address of the _variable_ in memory.\n\n**Example:**\n```basic\nX = 100\nADDR = ADR(X)  ' Address of variable X\n```\n\n### DPEEK(_addr_) / D.(_addr_)\n\nReturns the value of memory location _addr_ and _addr_+1 as a 16 bit integer.\n\nThis is the same as doing `PEEK(_addr_)+PEEK(_addr_+1)*256`.\n\n**Example:**\n```basic\nV = DPEEK(560)  ' Read 16-bit value at address 560\n```\n\n### DVSTAT(_index_) / DVS.(_index_)\n\nReads a byte from the DVSTAT buffer (device status buffer at memory locations 746-749). The _index_ parameter must be 0, 1, 2, or 3, corresponding to DVSTAT[0] through DVSTAT[3].\n\nThis function is used to read device-specific status information after calling `STATUS` on a device channel. The meaning of each byte depends on the device handler:\n\n- `DVSTAT(0)` - Error bits (bitfield)\n- `DVSTAT(1)` - Sense byte or buffer count low byte\n- `DVSTAT(2)` - Buffer count high byte (usually 0)\n- `DVSTAT(3)` - Output buffer count\n\nFor R: devices (Atari 850, R:Verter, BOB-Verter), see the helper functions above for easier access to common status information.\n\n**Example:**\n```basic\nSTATUS #1, ST\nIF ST = 1 THEN\n  ERR_BITS = DVSTAT(0)\n  SENSE = DVSTAT(1)\nENDIF\n```\n\n### PEEK(_address_) / P.(_address_)\n\nReturns the value of memory location at _address_.\n\n**Example:**\n```basic\nV = PEEK(53279)  ' Read CONSOL register\n```\n\n### USR(_address_[,_num1_ ...])\n\nLow level function that calls the user supplied machine code subroutine at _address_.\n\nParameters are pushed to the CPU stack, with the LOW part pushed first, so the first PLA returns the HIGH part of the last parameter, and so on.\n\nThe value of `A` and `X` registers is used as a return value of the function, with `A` the low part and `X` the high part.\n\n**Example:**\n```basic\n' PLA / EOR $FF / TAX / PLA / EOR $FF / RTS\nDATA ml() byte = $68,$49,$FF,$AA,$68,$49,$FF,$60\nFOR i=0 TO 1000 STEP 100\n  ? i, USR(ADR(ml),i)\nNEXT i\n```\n\n### $(_addr_)\n\nReturns the string at memory address _addr_.\n\nThis is the inverse of `ADR()`, and can be used to create arbitrary strings in memory.\n\n**Example:**\n```basic\nDATA x() byte = 2, $41, $42\n? $( ADR(x) )  ' Prints \"AB\"\n```\n\nYou can also store string addresses to reuse later, using less memory than copying the full string:\n\n```basic\nx = ADR(\"Hello\")\n? $( x )  ' Prints \"Hello\"\n```\n\n### %(_n_)\n\nThis returns the floating-point value stored at memory address _n_.\n\nThis function is special, as it is possible to use it also at the left side of an assignment, to store a floating point into an address:\n\n```basic\n%(1536) = 0.1234\n? %(1536)  ' Prints 0.1234\n```\n\n## Function Reference Table\n\n| Function | Abbreviation | Type | Parameters | Description |\n|----------|--------------|------|------------|-------------|\n| TIME | T. | Integer | None | Current time in jiffies |\n| ABS | A. | Numeric | Number | Absolute value |\n| SGN | SG. | Numeric | Number | Sign (-1, 0, or 1) |\n| RAND | R. | Integer | Max | Random integer |\n| FRE | F. | Integer | None | Free memory in bytes |\n| ERR | E. | Integer | None | Last I/O error |\n| LEN | L. | Integer | String | String length |\n| VAL | V. | Numeric | String | Convert string to number |\n| ASC | AS. | Integer | String | ATASCII code of first char |\n| PADDLE | PA. | Integer | Controller # | Paddle value |\n| PMADR | PM. | Integer | Player # | Player/Missile address |\n| PTRIG | PT. | Integer | Controller # | Paddle trigger state |\n| STICK | S. | Integer | Controller # | Joystick position |\n| STRIG | STR. | Integer | Controller # | Joystick trigger state |\n| KEY | K. | Integer | None | Key code |\n| ATN | AT. | Float | Number | Arc-tangent |\n| COS | CO. | Float | Number | Cosine |\n| EXP | - | Float | Number | Natural exponent |\n| EXP10 | EX. | Float | Number | 10 raised to power |\n| INT | I. | Integer | Float | Convert to integer |\n| LOG | - | Float | Number | Natural logarithm |\n| LOG10 | LO. | Float | Number | Decimal logarithm |\n| RND | RN. | Float | None | Random 0.0-1.0 |\n| SIN | SI. | Float | Number | Sine |\n| SQR | SQ. | Float | Number | Square root |\n| %TIME | %T. | Integer | None | 24-bit time |\n| STR$ | - | String | Number | Convert to string |\n| CHR$ | - | String | Number | ATASCII to character |\n| ADR | \u0026 | Integer | Variable | Memory address |\n| DPEEK | D. | Integer | Address | Read 16-bit value |\n| DVSTAT | DVS. | Integer | Index | DVSTAT buffer byte |\n| PEEK | P. | Integer | Address | Read byte |\n| USR | - | Integer | Address, ... | Call machine code |\n| $ | - | String | Address | String at address |\n| % | - | Float | Address | Float at address |\n\n## Next Steps\n\n- [Statements](statements.md) - Complete statement reference\n- [Expressions](expressions.md) - Expression operators and types\n- [Low-Level Programming](../advanced-topics/low-level-programming.md) - Advanced memory operations\n"},"currentPath":"language-reference/functions"},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["forge","language-reference","functions"]},"buildId":"uKcVMkypfjITnNYGcdC5l","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>