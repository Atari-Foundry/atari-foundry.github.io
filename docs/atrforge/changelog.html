<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><title data-next-head="">CHANGELOG | atrforge Documentation | Atari Foundry</title><meta name="description" content="atrforge documentation: CHANGELOG" data-next-head=""/><link rel="preload" href="/images/foundry_logo_50H.png" as="image" data-next-head=""/><link rel="preload" href="/_next/static/chunks/c81f129e50a5fd79.css" as="style"/><link rel="stylesheet" href="/_next/static/chunks/c81f129e50a5fd79.css" data-n-g=""/><noscript data-n-css=""></noscript><script src="/_next/static/chunks/e8a4a4ae55bc5744.js" defer=""></script><script src="/_next/static/chunks/00dac80f236dcabb.js" defer=""></script><script src="/_next/static/chunks/44f6bc00d9aaf830.js" defer=""></script><script src="/_next/static/chunks/fd7cb30d70431a0f.js" defer=""></script><script src="/_next/static/chunks/turbopack-4769270d21ef6607.js" defer=""></script><script src="/_next/static/chunks/1b081b821847ed60.js" defer=""></script><script src="/_next/static/chunks/39b01aa8a3352426.js" defer=""></script><script src="/_next/static/chunks/b56fd671c61106a7.js" defer=""></script><script src="/_next/static/chunks/turbopack-ab1a8023ffca1f9c.js" defer=""></script><script src="/_next/static/uKcVMkypfjITnNYGcdC5l/_ssgManifest.js" defer=""></script><script src="/_next/static/uKcVMkypfjITnNYGcdC5l/_buildManifest.js" defer=""></script></head><body><div id="__next"><div class="crt"><div class="scanlines" aria-hidden="true"></div><div class="noise" aria-hidden="true"></div><nav class="nav"><a class="nav-brand" href="/"><img alt="Atari Foundry icon" width="72" height="50" decoding="async" data-nimg="1" style="color:transparent;height:40px;width:auto" src="/images/foundry_logo_50H.png"/><div><span class="nav-brand-title">Atari Foundry</span><span class="nav-brand-sub">Products for Atari 8-bit</span></div></a><ul class="nav-links"><li class="nav-item"><a class="nav-link" href="/">Home</a></li><li class="nav-item"><a class="nav-link" href="/about">About</a></li><li class="nav-item"><a class="nav-link" href="/vault">Vault</a></li><li class="nav-item has-children"><button type="button" class="nav-link nav-trigger active" aria-haspopup="true" aria-expanded="false">Docs</button><div class="nav-dropdown"><a class="nav-dropdown-link" href="/docs/crucible">Crucible</a><a class="nav-dropdown-link" href="/docs/atrforge">atrforge</a><a class="nav-dropdown-link" href="/docs/forge">FORGE</a></div></li><li class="nav-item"><a class="nav-link" href="/support">Support</a></li></ul></nav><header class="subhero"><p class="label">atrforge<!-- --> Documentation</p><h1 class="page-title">CHANGELOG</h1></header><main><div class="docs-layout"><aside class="docs-sidebar"><nav class="docs-nav"><div class="docs-nav-section"><h3>Documentation</h3><ul style="list-style:none;padding:0;margin:0"><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/readme">README</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/advanced">ADVANCED</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/atr-format">ATR FORMAT</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/atrcp">ATRCP</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/atrforge">ATRFORGE</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/attributions">ATTRIBUTIONS</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/boot-files">BOOT FILES</a></li><li><a class="doc-link active" style="padding-left:0rem" href="/docs/atrforge/changelog">CHANGELOG</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/convertatr">CONVERTATR</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/dos-formats">DOS FORMATS</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/examples">EXAMPLES</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/file-attributes">FILE ATTRIBUTES</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/installation">INSTALLATION</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/lsatr">LSATR</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/troubleshooting">TROUBLESHOOTING</a></li><li><a class="doc-link " style="padding-left:0rem" href="/docs/atrforge/utf8-conversion">UTF8 CONVERSION</a></li></ul></div></nav></aside><div class="docs-content"><div class="docs-body"><div class="doc-markdown">&lt;!--
  Copyright (C) 2026 Rick Collette &amp; AtariFoundry.com

  This program is free software; you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 2 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License along
  with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;
--&gt;<!-- -->
<h1>Changelog</h1>
<p>All notable changes to the atrforge tools will be documented in this file.</p>
<p>The format is based on <a href="https://keepachangelog.com/en/1.0.0/" target="_blank" rel="noopener noreferrer" node="[object Object]">Keep a Changelog</a>,
and this project adheres to <a href="https://semver.org/spec/v2.0.0.html" target="_blank" rel="noopener noreferrer" node="[object Object]">Semantic Versioning</a>.</p>
<h2>[Unreleased]</h2>
<h3>New Features</h3>
<ul>
<li>
<p><strong>UTF8/ATASCII Conversion Support</strong> (2026-01-21): Added comprehensive UTF8 ↔ ATASCII conversion
functionality across all tools, allowing seamless editing of ATASCII files in modern UTF8 editors:</p>
<ul>
<li>New shared conversion library (<code>src/convert.c</code>, <code>src/convert.h</code>) based on example implementation</li>
<li><strong>convertatr</strong>: Added <code>--convert-utf8</code> and <code>--convert-atascii</code> options to convert files during
ATR resize/sector conversion operations</li>
<li><strong>atrcp</strong>: Added <code>--to-utf8</code>, <code>--to-atascii</code>, and <code>--7bit</code> options:<!-- -->
<ul>
<li><code>--to-utf8</code>: Convert ATASCII to UTF8 when extracting files from ATR</li>
<li><code>--to-atascii</code>: Convert UTF8 to ATASCII when adding files to ATR</li>
<li><code>--7bit</code>: Use 7-bit mode (strip high bit) for ATASCII→UTF8 conversion</li>
</ul>
</li>
<li><strong>atrforge</strong>: Added <code>--to-atascii</code> option to convert files from UTF8 to ATASCII when creating
or adding to ATR images</li>
<li>Conversion handles newline conversion (0x0a ↔ 155) and UTF8 multi-byte sequences</li>
<li>Files affected: <code>src/convert.c</code>, <code>src/convert.h</code>, <code>src/convertatr.c</code>, <code>src/convertatr_main.c</code>,
<code>src/atrcp.c</code>, <code>src/mkatr.c</code>, <code>src/flist.c</code>, <code>src/flist.h</code>, <code>Makefile</code></li>
</ul>
</li>
<li>
<p><strong>ATR File Copy Tool</strong> (2026-01-21): New <code>atrcp</code> program for copying files between ATR images
and the host filesystem:</p>
<ul>
<li>Extract files from ATR images: <code>atrcp image.atr:path/to/file.ext output.ext</code></li>
<li>Add files to ATR images: <code>atrcp input.ext image.atr:path/to/file.ext</code></li>
<li>Supports SpartaDOS/BW-DOS filesystem format</li>
<li>Creates automatic backups when modifying ATR files</li>
<li>Files affected: <code>src/atrcp.c</code>, <code>Makefile</code></li>
</ul>
</li>
<li>
<p><strong>ATR File Modification</strong> (2026-01-21): Added ability to add files to existing ATR images
using the <code>-a</code> option in <code>atrforge</code>. This creates a backup of the original file
before modification.</p>
<ul>
<li>Files affected: <code>src/mkatr.c</code>, <code>src/modatr.c</code>, <code>src/modatr.h</code></li>
<li>Note: Full in-place modification (delete/rename) requires additional
implementation</li>
</ul>
</li>
<li>
<p><strong>ATR Conversion Tool</strong> (2026-01-21): New <code>convertatr</code> program for converting and resizing
ATR images:</p>
<ul>
<li>Resize images to different sector counts</li>
<li>Convert between 128-byte and 256-byte sector sizes</li>
<li>Files affected: <code>src/convertatr.c</code>, <code>src/convertatr.h</code>, <code>src/convertatr_main.c</code></li>
</ul>
</li>
</ul>
<h3>New Features (from previous release)</h3>
<ul>
<li><strong>Enhanced CLI Options</strong> (2026-01-21): Added new command-line options to <code>lsatr</code>:<!-- -->
<ul>
<li><code>-q</code> (quiet mode): Suppress informational messages</li>
<li><code>-f</code> (force overwrite): Allow overwriting existing files during extraction</li>
<li><code>--verify</code>: Verify ATR image integrity (checks if image loads correctly and has valid structure)</li>
<li>Files affected: <code>src/lsatr.c</code>, <code>src/msg.c</code>, <code>src/msg.h</code>, <code>src/lssfs.c</code>, <code>src/lsdos.c</code>, <code>src/lsextra.c</code>, <code>src/lshowfen.c</code></li>
</ul>
</li>
</ul>
<h3>Security Fixes</h3>
<ul>
<li>
<p><strong>Path Traversal Prevention</strong> (2026-01-21): Added comprehensive path sanitization to prevent
directory traversal attacks when extracting files from ATR images. All file
paths are now validated to remove <code>..</code> components and reject absolute paths.</p>
<ul>
<li>Implemented <code>sanitize_path()</code> function in <code>compat.c</code></li>
<li>Applied path sanitization in <code>lssfs.c</code>, <code>lsdos.c</code>, and <code>lsextra.c</code></li>
<li>Files affected: <code>src/compat.c</code>, <code>src/compat.h</code>, <code>src/lssfs.c</code>, <code>src/lsdos.c</code>, <code>src/lsextra.c</code></li>
</ul>
</li>
<li>
<p><strong>Unchecked asprintf Return Values</strong> (2026-01-21): Added error checking for all <code>asprintf()</code>
calls to handle memory allocation failures properly.</p>
<ul>
<li>Files affected: <code>src/lssfs.c</code>, <code>src/lsdos.c</code>, <code>src/lsextra.c</code></li>
</ul>
</li>
<li>
<p><strong>Unsafe String Operations</strong> (2026-01-21): Replaced unsafe <code>strcpy()</code> and <code>strcat()</code> calls
with bounds-checked alternatives (<code>strncpy()</code>, <code>snprintf()</code>).</p>
<ul>
<li>Files affected: <code>src/lsextra.c</code>, <code>src/flist.c</code></li>
</ul>
</li>
<li>
<p><strong>Sector Number Validation</strong> (2026-01-21): Added comprehensive sector number validation in
all sector access functions to prevent out-of-bounds access.</p>
<ul>
<li>Added validation in <code>file_msize()</code> and <code>read_file()</code> in <code>lssfs.c</code></li>
<li>Added validation in <code>read_file()</code> in <code>lsdos.c</code></li>
<li>Added validation in <code>sfs_ptr()</code>, <code>sfs_free_sec()</code>, and <code>sfs_used()</code> in <code>spartafs.c</code></li>
<li>Added loop detection to prevent infinite loops in sector chains</li>
<li>Files affected: <code>src/lssfs.c</code>, <code>src/lsdos.c</code>, <code>src/spartafs.c</code></li>
</ul>
</li>
<li>
<p><strong>Integer Overflow Protection</strong> (2026-01-21): Added overflow checks in size calculations to
prevent buffer overflows and integer wraparound.</p>
<ul>
<li>Added checks in <code>image_size()</code> and <code>write_atr()</code> in <code>mkatr.c</code></li>
<li>Added checks in <code>load_atr_image()</code> in <code>atr.c</code></li>
<li>Files affected: <code>src/mkatr.c</code>, <code>src/atr.c</code></li>
</ul>
</li>
</ul>
<h3>Code Quality Improvements</h3>
<ul>
<li>
<p><strong>Build System Organization</strong> (2026-01-21): Improved build system organization:</p>
<ul>
<li>All compiled binaries now placed in <code>bin/</code> directory instead of root directory</li>
<li>Updated <code>make clean</code> to remove both <code>obj/</code> and <code>bin/</code> directories</li>
<li>Better separation of build artifacts and final binaries</li>
<li>Files affected: <code>Makefile</code></li>
</ul>
</li>
<li>
<p><strong>Error Message Consistency</strong> (2026-01-21): Standardized all error messages to use &quot;can&#x27;t&quot;
instead of &quot;can´t&quot; throughout the codebase.</p>
<ul>
<li>Files affected: <code>src/atr.c</code>, <code>src/mkatr.c</code>, <code>src/lsdos.c</code>, <code>src/lssfs.c</code>, <code>src/lsextra.c</code>, <code>src/lshowfen.c</code></li>
</ul>
</li>
<li>
<p><strong>Error Handling</strong> (2026-01-21): Improved error handling by:</p>
<ul>
<li>Checking <code>fwrite()</code> return values in <code>mkatr.c</code></li>
<li>Adding better error context to error messages</li>
<li>Ensuring proper cleanup in error paths</li>
</ul>
</li>
<li>
<p><strong>Memory Safety</strong> (2026-01-21): Improved memory management by:</p>
<ul>
<li>Ensuring proper cleanup in all error paths</li>
<li>Validating memory allocation results</li>
<li>Preventing memory leaks in error conditions</li>
</ul>
</li>
</ul>
<h3>Documentation</h3>
<ul>
<li>
<p><strong>README Updates</strong> (2026-01-21): Enhanced README.md with:</p>
<ul>
<li>Security considerations section</li>
<li>Build requirements</li>
<li>Known limitations</li>
<li>Installation instructions</li>
</ul>
</li>
<li>
<p><strong>Security Documentation</strong> (2026-01-21): Created <code>SECURITY.md</code> with:</p>
<ul>
<li>Security features overview</li>
<li>Security recommendations for users and developers</li>
<li>Security issue reporting guidelines</li>
</ul>
</li>
<li>
<p><strong>Changelog</strong> (2026-01-21): Created <code>CHANGELOG.md</code> to track all changes, improvements, and
security fixes.</p>
</li>
</ul>
<h2>[1.4~beta] - Previous Release</h2>
<h3>Features</h3>
<ul>
<li>
<p>Support for creating ATR images with SpartaDOS/BW-DOS filesystem</p>
</li>
<li>
<p>Support for listing and extracting from multiple DOS formats:</p>
<ul>
<li>Atari DOS 1, 2.0, 2.5</li>
<li>MyDOS</li>
<li>SpartaDOS and BW-DOS</li>
<li>LiteDOS 2.x and LiteDOS-SE</li>
<li>BAS2BOOT images</li>
<li>Howfen DOS images</li>
<li>K-file boot images</li>
</ul>
</li>
<li>
<p>Boot file support with configurable bootloader address</p>
</li>
<li>
<p>File attribute support (protected, hidden, archived)</p>
</li>
<li>
<p>Directory structure support</p>
</li>
<li>
<p>Multiple disk size formats (90k to 16MB)</p>
</li>
</ul>
<h3>Known Issues (Fixed in Unreleased)</h3>
<ul>
<li>Path traversal vulnerability in file extraction</li>
<li>Unchecked memory allocation return values</li>
<li>Unsafe string operations</li>
<li>Missing sector number validation</li>
<li>Integer overflow vulnerabilities</li>
<li>Inconsistent error message formatting</li>
</ul>
<hr/>
<h2>Version History</h2>
<ul>
<li><strong>1.4~beta</strong>: Initial public release with core functionality</li>
<li><strong>Unreleased</strong>: Security fixes and code quality improvements</li>
</ul></div></div></div></div></main><footer class="footer"><p>© 2026 Atari Foundry · Rick Collette · Software for Atari 8-bit builders.</p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"product":"atrforge","productDocs":{"product":"atrforge","files":[{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/README.md","relativePath":"README.md","relativeDir":"","filename":"README","slug":"readme","name":"README"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ADVANCED.md","relativePath":"ADVANCED.md","relativeDir":"","filename":"ADVANCED","slug":"advanced","name":"ADVANCED"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATR_FORMAT.md","relativePath":"ATR_FORMAT.md","relativeDir":"","filename":"ATR_FORMAT","slug":"atr-format","name":"ATR FORMAT"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATRCP.md","relativePath":"ATRCP.md","relativeDir":"","filename":"ATRCP","slug":"atrcp","name":"ATRCP"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATRFORGE.md","relativePath":"ATRFORGE.md","relativeDir":"","filename":"ATRFORGE","slug":"atrforge","name":"ATRFORGE"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATTRIBUTIONS.md","relativePath":"ATTRIBUTIONS.md","relativeDir":"","filename":"ATTRIBUTIONS","slug":"attributions","name":"ATTRIBUTIONS"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/BOOT_FILES.md","relativePath":"BOOT_FILES.md","relativeDir":"","filename":"BOOT_FILES","slug":"boot-files","name":"BOOT FILES"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/CHANGELOG.md","relativePath":"CHANGELOG.md","relativeDir":"","filename":"CHANGELOG","slug":"changelog","name":"CHANGELOG"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/CONVERTATR.md","relativePath":"CONVERTATR.md","relativeDir":"","filename":"CONVERTATR","slug":"convertatr","name":"CONVERTATR"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/DOS_FORMATS.md","relativePath":"DOS_FORMATS.md","relativeDir":"","filename":"DOS_FORMATS","slug":"dos-formats","name":"DOS FORMATS"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/EXAMPLES.md","relativePath":"EXAMPLES.md","relativeDir":"","filename":"EXAMPLES","slug":"examples","name":"EXAMPLES"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/FILE_ATTRIBUTES.md","relativePath":"FILE_ATTRIBUTES.md","relativeDir":"","filename":"FILE_ATTRIBUTES","slug":"file-attributes","name":"FILE ATTRIBUTES"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/INSTALLATION.md","relativePath":"INSTALLATION.md","relativeDir":"","filename":"INSTALLATION","slug":"installation","name":"INSTALLATION"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/LSATR.md","relativePath":"LSATR.md","relativeDir":"","filename":"LSATR","slug":"lsatr","name":"LSATR"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/TROUBLESHOOTING.md","relativePath":"TROUBLESHOOTING.md","relativeDir":"","filename":"TROUBLESHOOTING","slug":"troubleshooting","name":"TROUBLESHOOTING"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/UTF8_CONVERSION.md","relativePath":"UTF8_CONVERSION.md","relativeDir":"","filename":"UTF8_CONVERSION","slug":"utf8-conversion","name":"UTF8 CONVERSION"}],"navTree":{"_files":[{"name":"README","slug":"readme","path":"README.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/README.md","isIndex":true},{"name":"ADVANCED","slug":"advanced","path":"ADVANCED.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ADVANCED.md","isIndex":false},{"name":"ATR FORMAT","slug":"atr-format","path":"ATR_FORMAT.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATR_FORMAT.md","isIndex":false},{"name":"ATRCP","slug":"atrcp","path":"ATRCP.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATRCP.md","isIndex":false},{"name":"ATRFORGE","slug":"atrforge","path":"ATRFORGE.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATRFORGE.md","isIndex":false},{"name":"ATTRIBUTIONS","slug":"attributions","path":"ATTRIBUTIONS.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATTRIBUTIONS.md","isIndex":false},{"name":"BOOT FILES","slug":"boot-files","path":"BOOT_FILES.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/BOOT_FILES.md","isIndex":false},{"name":"CHANGELOG","slug":"changelog","path":"CHANGELOG.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/CHANGELOG.md","isIndex":false},{"name":"CONVERTATR","slug":"convertatr","path":"CONVERTATR.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/CONVERTATR.md","isIndex":false},{"name":"DOS FORMATS","slug":"dos-formats","path":"DOS_FORMATS.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/DOS_FORMATS.md","isIndex":false},{"name":"EXAMPLES","slug":"examples","path":"EXAMPLES.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/EXAMPLES.md","isIndex":false},{"name":"FILE ATTRIBUTES","slug":"file-attributes","path":"FILE_ATTRIBUTES.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/FILE_ATTRIBUTES.md","isIndex":false},{"name":"INSTALLATION","slug":"installation","path":"INSTALLATION.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/INSTALLATION.md","isIndex":false},{"name":"LSATR","slug":"lsatr","path":"LSATR.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/LSATR.md","isIndex":false},{"name":"TROUBLESHOOTING","slug":"troubleshooting","path":"TROUBLESHOOTING.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/TROUBLESHOOTING.md","isIndex":false},{"name":"UTF8 CONVERSION","slug":"utf8-conversion","path":"UTF8_CONVERSION.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/UTF8_CONVERSION.md","isIndex":false}]}},"docFile":{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/CHANGELOG.md","relativePath":"CHANGELOG.md","relativeDir":"","filename":"CHANGELOG","slug":"changelog","name":"CHANGELOG","content":"\u003c!--\n  Copyright (C) 2026 Rick Collette \u0026 AtariFoundry.com\n\n  This program is free software; you can redistribute it and/or modify\n  it under the terms of the GNU General Public License as published by\n  the Free Software Foundation, either version 2 of the License, or\n  (at your option) any later version.\n\n  This program is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  GNU General Public License for more details.\n\n  You should have received a copy of the GNU General Public License along\n  with this program.  If not, see \u003chttp://www.gnu.org/licenses/\u003e\n--\u003e\n\n# Changelog\n\nAll notable changes to the atrforge tools will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [Unreleased]\n\n### New Features\n\n- **UTF8/ATASCII Conversion Support** (2026-01-21): Added comprehensive UTF8 ↔ ATASCII conversion\n  functionality across all tools, allowing seamless editing of ATASCII files in modern UTF8 editors:\n  - New shared conversion library (`src/convert.c`, `src/convert.h`) based on example implementation\n  - **convertatr**: Added `--convert-utf8` and `--convert-atascii` options to convert files during\n    ATR resize/sector conversion operations\n  - **atrcp**: Added `--to-utf8`, `--to-atascii`, and `--7bit` options:\n    - `--to-utf8`: Convert ATASCII to UTF8 when extracting files from ATR\n    - `--to-atascii`: Convert UTF8 to ATASCII when adding files to ATR\n    - `--7bit`: Use 7-bit mode (strip high bit) for ATASCII→UTF8 conversion\n  - **atrforge**: Added `--to-atascii` option to convert files from UTF8 to ATASCII when creating\n    or adding to ATR images\n  - Conversion handles newline conversion (0x0a ↔ 155) and UTF8 multi-byte sequences\n  - Files affected: `src/convert.c`, `src/convert.h`, `src/convertatr.c`, `src/convertatr_main.c`,\n    `src/atrcp.c`, `src/mkatr.c`, `src/flist.c`, `src/flist.h`, `Makefile`\n\n- **ATR File Copy Tool** (2026-01-21): New `atrcp` program for copying files between ATR images\n  and the host filesystem:\n  - Extract files from ATR images: `atrcp image.atr:path/to/file.ext output.ext`\n  - Add files to ATR images: `atrcp input.ext image.atr:path/to/file.ext`\n  - Supports SpartaDOS/BW-DOS filesystem format\n  - Creates automatic backups when modifying ATR files\n  - Files affected: `src/atrcp.c`, `Makefile`\n\n- **ATR File Modification** (2026-01-21): Added ability to add files to existing ATR images\n  using the `-a` option in `atrforge`. This creates a backup of the original file\n  before modification.\n  - Files affected: `src/mkatr.c`, `src/modatr.c`, `src/modatr.h`\n  - Note: Full in-place modification (delete/rename) requires additional\n    implementation\n\n- **ATR Conversion Tool** (2026-01-21): New `convertatr` program for converting and resizing\n  ATR images:\n  - Resize images to different sector counts\n  - Convert between 128-byte and 256-byte sector sizes\n  - Files affected: `src/convertatr.c`, `src/convertatr.h`, `src/convertatr_main.c`\n\n### New Features (from previous release)\n\n- **Enhanced CLI Options** (2026-01-21): Added new command-line options to `lsatr`:\n  - `-q` (quiet mode): Suppress informational messages\n  - `-f` (force overwrite): Allow overwriting existing files during extraction\n  - `--verify`: Verify ATR image integrity (checks if image loads correctly and has valid structure)\n  - Files affected: `src/lsatr.c`, `src/msg.c`, `src/msg.h`, `src/lssfs.c`, `src/lsdos.c`, `src/lsextra.c`, `src/lshowfen.c`\n\n### Security Fixes\n\n- **Path Traversal Prevention** (2026-01-21): Added comprehensive path sanitization to prevent\n  directory traversal attacks when extracting files from ATR images. All file\n  paths are now validated to remove `..` components and reject absolute paths.\n  - Implemented `sanitize_path()` function in `compat.c`\n  - Applied path sanitization in `lssfs.c`, `lsdos.c`, and `lsextra.c`\n  - Files affected: `src/compat.c`, `src/compat.h`, `src/lssfs.c`, `src/lsdos.c`, `src/lsextra.c`\n\n- **Unchecked asprintf Return Values** (2026-01-21): Added error checking for all `asprintf()`\n  calls to handle memory allocation failures properly.\n  - Files affected: `src/lssfs.c`, `src/lsdos.c`, `src/lsextra.c`\n\n- **Unsafe String Operations** (2026-01-21): Replaced unsafe `strcpy()` and `strcat()` calls\n  with bounds-checked alternatives (`strncpy()`, `snprintf()`).\n  - Files affected: `src/lsextra.c`, `src/flist.c`\n\n- **Sector Number Validation** (2026-01-21): Added comprehensive sector number validation in\n  all sector access functions to prevent out-of-bounds access.\n  - Added validation in `file_msize()` and `read_file()` in `lssfs.c`\n  - Added validation in `read_file()` in `lsdos.c`\n  - Added validation in `sfs_ptr()`, `sfs_free_sec()`, and `sfs_used()` in `spartafs.c`\n  - Added loop detection to prevent infinite loops in sector chains\n  - Files affected: `src/lssfs.c`, `src/lsdos.c`, `src/spartafs.c`\n\n- **Integer Overflow Protection** (2026-01-21): Added overflow checks in size calculations to\n  prevent buffer overflows and integer wraparound.\n  - Added checks in `image_size()` and `write_atr()` in `mkatr.c`\n  - Added checks in `load_atr_image()` in `atr.c`\n  - Files affected: `src/mkatr.c`, `src/atr.c`\n\n### Code Quality Improvements\n\n- **Build System Organization** (2026-01-21): Improved build system organization:\n  - All compiled binaries now placed in `bin/` directory instead of root directory\n  - Updated `make clean` to remove both `obj/` and `bin/` directories\n  - Better separation of build artifacts and final binaries\n  - Files affected: `Makefile`\n\n- **Error Message Consistency** (2026-01-21): Standardized all error messages to use \"can't\"\n  instead of \"can´t\" throughout the codebase.\n  - Files affected: `src/atr.c`, `src/mkatr.c`, `src/lsdos.c`, `src/lssfs.c`, `src/lsextra.c`, `src/lshowfen.c`\n\n- **Error Handling** (2026-01-21): Improved error handling by:\n  - Checking `fwrite()` return values in `mkatr.c`\n  - Adding better error context to error messages\n  - Ensuring proper cleanup in error paths\n\n- **Memory Safety** (2026-01-21): Improved memory management by:\n  - Ensuring proper cleanup in all error paths\n  - Validating memory allocation results\n  - Preventing memory leaks in error conditions\n\n### Documentation\n\n- **README Updates** (2026-01-21): Enhanced README.md with:\n  - Security considerations section\n  - Build requirements\n  - Known limitations\n  - Installation instructions\n\n- **Security Documentation** (2026-01-21): Created `SECURITY.md` with:\n  - Security features overview\n  - Security recommendations for users and developers\n  - Security issue reporting guidelines\n\n- **Changelog** (2026-01-21): Created `CHANGELOG.md` to track all changes, improvements, and\n  security fixes.\n\n## [1.4~beta] - Previous Release\n\n### Features\n\n- Support for creating ATR images with SpartaDOS/BW-DOS filesystem\n- Support for listing and extracting from multiple DOS formats:\n  - Atari DOS 1, 2.0, 2.5\n  - MyDOS\n  - SpartaDOS and BW-DOS\n  - LiteDOS 2.x and LiteDOS-SE\n  - BAS2BOOT images\n  - Howfen DOS images\n  - K-file boot images\n\n- Boot file support with configurable bootloader address\n- File attribute support (protected, hidden, archived)\n- Directory structure support\n- Multiple disk size formats (90k to 16MB)\n\n### Known Issues (Fixed in Unreleased)\n\n- Path traversal vulnerability in file extraction\n- Unchecked memory allocation return values\n- Unsafe string operations\n- Missing sector number validation\n- Integer overflow vulnerabilities\n- Inconsistent error message formatting\n\n---\n\n## Version History\n\n- **1.4~beta**: Initial public release with core functionality\n- **Unreleased**: Security fixes and code quality improvements\n"},"currentPath":"changelog"},"__N_SSG":true},"page":"/docs/[...slug]","query":{"slug":["atrforge","changelog"]},"buildId":"uKcVMkypfjITnNYGcdC5l","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>