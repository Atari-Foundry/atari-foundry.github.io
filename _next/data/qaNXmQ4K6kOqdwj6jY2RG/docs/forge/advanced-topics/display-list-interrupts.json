{"pageProps":{"product":"forge","productDocs":{"product":"forge","files":[{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/cc65/README.md","relativePath":"cc65/README.md","relativeDir":"cc65","filename":"README","slug":"readme","name":"README"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/README.md","relativePath":"README.md","relativeDir":"","filename":"README","slug":"readme","name":"README"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/attributions.md","relativePath":"about/attributions.md","relativeDir":"about","filename":"attributions","slug":"attributions","name":"attributions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/cio-reference.md","relativePath":"advanced-topics/cio-reference.md","relativeDir":"advanced-topics","filename":"cio-reference","slug":"cio-reference","name":"cio-reference"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/compiling.md","relativePath":"getting-started/compiling.md","relativeDir":"getting-started","filename":"compiling","slug":"compiling","name":"compiling"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/differences.md","relativePath":"getting-started/differences.md","relativeDir":"getting-started","filename":"differences","slug":"differences","name":"differences"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/display-list-interrupts.md","relativePath":"advanced-topics/display-list-interrupts.md","relativeDir":"advanced-topics","filename":"display-list-interrupts","slug":"display-list-interrupts","name":"display-list-interrupts"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-guide.md","relativePath":"editor/editor-guide.md","relativeDir":"editor","filename":"editor-guide","slug":"editor-guide","name":"editor-guide"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-optimization.md","relativePath":"editor/editor-optimization.md","relativeDir":"editor","filename":"editor-optimization","slug":"editor-optimization","name":"editor-optimization"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/expressions.md","relativePath":"language-reference/expressions.md","relativeDir":"language-reference","filename":"expressions","slug":"expressions","name":"expressions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/first-steps.md","relativePath":"getting-started/first-steps.md","relativeDir":"getting-started","filename":"first-steps","slug":"first-steps","name":"first-steps"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/fujinet.md","relativePath":"advanced-topics/fujinet.md","relativeDir":"advanced-topics","filename":"fujinet","slug":"fujinet","name":"fujinet"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/functions.md","relativePath":"language-reference/functions.md","relativeDir":"language-reference","filename":"functions","slug":"functions","name":"functions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/hardware-registers.md","relativePath":"reference/hardware-registers.md","relativeDir":"reference","filename":"hardware-registers","slug":"hardware-registers","name":"hardware-registers"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/index.md","relativePath":"index.md","relativeDir":"","filename":"index","slug":"index","name":"index"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/interrupts.md","relativePath":"reference/interrupts.md","relativeDir":"reference","filename":"interrupts","slug":"interrupts","name":"interrupts"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/introduction.md","relativePath":"getting-started/introduction.md","relativeDir":"getting-started","filename":"introduction","slug":"introduction","name":"introduction"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/iocb-structure.md","relativePath":"reference/iocb-structure.md","relativeDir":"reference","filename":"iocb-structure","slug":"iocb-structure","name":"iocb-structure"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/low-level-programming.md","relativePath":"advanced-topics/low-level-programming.md","relativeDir":"advanced-topics","filename":"low-level-programming","slug":"low-level-programming","name":"low-level-programming"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-map.md","relativePath":"reference/memory-map.md","relativeDir":"reference","filename":"memory-map","slug":"memory-map","name":"memory-map"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-usage.md","relativePath":"reference/memory-usage.md","relativeDir":"reference","filename":"memory-usage","slug":"memory-usage","name":"memory-usage"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/note-point.md","relativePath":"advanced-topics/note-point.md","relativeDir":"advanced-topics","filename":"note-point","slug":"note-point","name":"note-point"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/os-equates.md","relativePath":"reference/os-equates.md","relativeDir":"reference","filename":"os-equates","slug":"os-equates","name":"os-equates"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/r-handler.md","relativePath":"reference/r-handler.md","relativeDir":"reference","filename":"r-handler","slug":"r-handler","name":"r-handler"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/sio-operations.md","relativePath":"advanced-topics/sio-operations.md","relativeDir":"advanced-topics","filename":"sio-operations","slug":"sio-operations","name":"sio-operations"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/statements.md","relativePath":"language-reference/statements.md","relativeDir":"language-reference","filename":"statements","slug":"statements","name":"statements"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/syntax.md","relativePath":"language-reference/syntax.md","relativeDir":"language-reference","filename":"syntax","slug":"syntax","name":"syntax"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/why-forge.md","relativePath":"about/why-forge.md","relativeDir":"about","filename":"why-forge","slug":"why-forge","name":"why-forge"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/xio-reference.md","relativePath":"advanced-topics/xio-reference.md","relativeDir":"advanced-topics","filename":"xio-reference","slug":"xio-reference","name":"xio-reference"}],"navTree":{"cc65":{"_files":[{"name":"README","slug":"readme","path":"cc65/README.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/cc65/README.md","isIndex":true}]},"_files":[{"name":"README","slug":"readme","path":"README.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/README.md","isIndex":true},{"name":"index","slug":"index","path":"index.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/index.md","isIndex":false}],"about":{"_files":[{"name":"attributions","slug":"attributions","path":"about/attributions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/attributions.md","isIndex":false},{"name":"why-forge","slug":"why-forge","path":"about/why-forge.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/why-forge.md","isIndex":false}]},"advanced-topics":{"_files":[{"name":"cio-reference","slug":"cio-reference","path":"advanced-topics/cio-reference.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/cio-reference.md","isIndex":false},{"name":"display-list-interrupts","slug":"display-list-interrupts","path":"advanced-topics/display-list-interrupts.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/display-list-interrupts.md","isIndex":false},{"name":"fujinet","slug":"fujinet","path":"advanced-topics/fujinet.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/fujinet.md","isIndex":false},{"name":"low-level-programming","slug":"low-level-programming","path":"advanced-topics/low-level-programming.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/low-level-programming.md","isIndex":false},{"name":"note-point","slug":"note-point","path":"advanced-topics/note-point.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/note-point.md","isIndex":false},{"name":"sio-operations","slug":"sio-operations","path":"advanced-topics/sio-operations.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/sio-operations.md","isIndex":false},{"name":"xio-reference","slug":"xio-reference","path":"advanced-topics/xio-reference.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/xio-reference.md","isIndex":false}]},"getting-started":{"_files":[{"name":"compiling","slug":"compiling","path":"getting-started/compiling.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/compiling.md","isIndex":false},{"name":"differences","slug":"differences","path":"getting-started/differences.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/differences.md","isIndex":false},{"name":"first-steps","slug":"first-steps","path":"getting-started/first-steps.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/first-steps.md","isIndex":false},{"name":"introduction","slug":"introduction","path":"getting-started/introduction.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/introduction.md","isIndex":false}]},"editor":{"_files":[{"name":"editor-guide","slug":"editor-guide","path":"editor/editor-guide.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-guide.md","isIndex":false},{"name":"editor-optimization","slug":"editor-optimization","path":"editor/editor-optimization.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-optimization.md","isIndex":false}]},"language-reference":{"_files":[{"name":"expressions","slug":"expressions","path":"language-reference/expressions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/expressions.md","isIndex":false},{"name":"functions","slug":"functions","path":"language-reference/functions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/functions.md","isIndex":false},{"name":"statements","slug":"statements","path":"language-reference/statements.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/statements.md","isIndex":false},{"name":"syntax","slug":"syntax","path":"language-reference/syntax.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/syntax.md","isIndex":false}]},"reference":{"_files":[{"name":"hardware-registers","slug":"hardware-registers","path":"reference/hardware-registers.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/hardware-registers.md","isIndex":false},{"name":"interrupts","slug":"interrupts","path":"reference/interrupts.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/interrupts.md","isIndex":false},{"name":"iocb-structure","slug":"iocb-structure","path":"reference/iocb-structure.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/iocb-structure.md","isIndex":false},{"name":"memory-map","slug":"memory-map","path":"reference/memory-map.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-map.md","isIndex":false},{"name":"memory-usage","slug":"memory-usage","path":"reference/memory-usage.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-usage.md","isIndex":false},{"name":"os-equates","slug":"os-equates","path":"reference/os-equates.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/os-equates.md","isIndex":false},{"name":"r-handler","slug":"r-handler","path":"reference/r-handler.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/r-handler.md","isIndex":false}]}}},"docFile":{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/display-list-interrupts.md","relativePath":"advanced-topics/display-list-interrupts.md","relativeDir":"advanced-topics","filename":"display-list-interrupts","slug":"display-list-interrupts","name":"display-list-interrupts","content":"# Display List Interrupts\n\n*Note: This is an advanced topic.*\n\nDisplay list interrupts (normally called `DLI`) are a way to modify display registers at certain vertical positions on the screen.\n\n## What Are DLIs?\n\nDLIs allow you to change display hardware registers during screen rendering, enabling effects that would otherwise be impossible with a single set of register values.\n\n## Uses for DLIs\n\nYou can use DLIs to:\n\n- **Display more colors in the image** - By changing color registers (registers from $D012 to $D01A)\n- **Split Player/Missile graphics** - Move players/missiles to different horizontal positions (registers from $D000 to D007)\n- **Change scrolling position** - Modify screen scrolling during display\n- **Change screen width** - Adjust screen width mid-frame\n- **Modify P/M width** - Change Player/Missile width settings\n- **Create color gradients** - Change colors line-by-line for gradient effects\n\n## FORGE DLI Support\n\nFORGE allows you to specify one or more DLI routines, activate one or deactivate all DLI by using the `DLI` statement.\n\n## Defining a DLI\n\n### DLI SET _name_ = _op1_, _op2_, ... / DLIS.\n\nSetups a new DLI with the given name and performing the _op_ operations.\n\nEach operation is of the form:\n- _data_ `INTO` _address_ \n- _data_ `WSYNC` `INTO` _address_\n\nWhere:\n- _data_ is one constant byte or the name of a `DATA BYTE` array\n- _address_ is a memory location to modify\n\n### Array-Based DLIs\n\nIf _data_ is a `DATA` array, the first element (at index 0) will be used at the first line with DLI active in the screen, the second element at the second active line, etc.\n\n### WSYNC\n\nThe `WSYNC` word advances one line in the display area (this is done by writing to the `WSYNC` ANTIC register), so the value is set in the next screen line. You can put the `WSYNC` word multiple times to advance more than one line. This allows one DLI to modify multiple lines at the screen.\n\n### Multiple INTO Operations\n\nMultiple `INTO` words can be used to write more than one register with the same value.\n\n### Abbreviations\n\n- `INTO` can be abbreviated to `I.`\n- `WSYNC` can be abbreviated to `W.`\n\n### Important Notes\n\n- You can specify any number of operations, but as each one takes some time you could see display artifacts if you use too many.\n- By defining a DLI you are simply giving it a name, you need to activate the DLI afterwards.\n- You can split a DLI definition over multiple lines, just like `DATA` by ending a line with a comma and starting the next line with `DLI =`\n\n## Enabling a DLI\n\n### DLI _name_ / DL.\n\nThis statement enables the DLI with the given name, the DLI must be defined before in the program.\n\nThis setups the OS DLI pointer to the named DLI and activates the interrupt bit in the display processor (the ANTIC chip), but does not activate on which lines the DLI must be called.\n\nTo define on which lines the DLI is active you must modify the Display List, see the examples below.\n\n### Custom Machine Code DLIs\n\nYou can also pass the name of a `DATA BYTE` array with a custom machine language routine to the `DLI` statement, the routine must begin with a _PHA_ and end with _PLA_ and _RTI_.\n\n## Disabling a DLI\n\n### DLI / DL.\n\nThis statement simply disables the DLI, returning the display to the original state.\n\n## Display List Modification\n\nTo activate DLIs on specific screen lines, you must modify the Display List. The Display List address is stored at memory location 560 (DPEEK(560)).\n\nTo enable a DLI on a specific line, you need to set bit 7 (add 128) to the display list instruction byte for that line.\n\n**Example:**\n```basic\n' Enable DLI on line 11 (offset 16 in display list)\nPOKE DPEEK(560) + 16, 130  ' 2 + 128 = 130\n```\n\n## Examples\n\n### Example 1: Simple Background Color Change\n\nThis is the most basic example of a DLI that simply changes the background color at the middle of the screen:\n\n```basic\n' Define the DLI: set background color to $24 = dark red.\nDLI SET d1 = $24 INTO $D01A\n' Setups screen\nGRAPHICS 0\n' Alter the Display List, adds a DLI at line 11 on the screen\nPOKE DPEEK(560) + 16, 130\n' Activate DLI\nDLI d1\n' Wait for any key\n? \"Press a Key\" : GET K\n' Disable the DLI\nDLI\n```\n\n### Example 2: Multiple Color Changes\n\nThe next example shows how you can use a DLI to change multiple values in the screen:\n\n```basic\n' An array with color values\nDATA Colors() BYTE = $24,$46,$68\n' Define the DLI: set background color from the Color() array\n' and text back color with value $8A in the same line and then\n' the black in to the next line.\nDLI SET d2 = Colors INTO $D01A,\nDLI        = $8A INTO $D018,\nDLI        = $00 WSYNC INTO $D018\n' Setups screen\nGRAPHICS 0\n' Adds DLI at three lines:\nPOKE DPEEK(560) + 13, 130\nPOKE DPEEK(560) + 16, 130\nPOKE DPEEK(560) + 19, 130\n' Activate DLI\nDLI d2\n' Wait for any key\n? \"Press a Key\" : GET K\n' Disable the DLI\nDLI\n```\n\n### Example 3: Player/Missile Movement\n\nThe final example shows how you can move multiple P/M using one DLI:\n\n```basic\n' Player shapes, positions and colors\nDATA p1() BYTE = $E7,$81,$81,$E7\nDATA p2() BYTE = $18,$3C,$3C,$18\nDATA pos() BYTE = $40,$60,$80,$A0\nDATA c1() BYTE = $28,$88,$C8,$08\nDATA c2() BYTE = $2E,$80,$CE,$06\n' Our DLI writes the position and colors to Player 1 and Player 2\nDLI SET d3 = pos INTO $D000 INTO $D001,\nDLI        = c1 INTO $D012, c2 INTO $D013\nGRAPHICS 0 : PMGRAPHICS 2\n' Setup our 4 DLI and Players\nFOR I = 8 TO 20 STEP 4\n  POKE DPEEK(560) + I, 130\n  MOVE ADR(p1), PMADR(0)+I*4+5,4\n  MOVE ADR(p2), PMADR(1)+I*4+5,4\nNEXT\n' Activate DLI\nDLI d3\n? \"Press a Key\"\nREPEAT\n  PAUSE\n  pos(0) = pos(0) + 2\n  pos(1) = pos(1) + 1\n  pos(2) = pos(2) - 1\n  pos(3) = pos(3) - 2\nUNTIL KEY()\nDLI\n```\n\n## Useful Registers\n\nThis is a table of some useful registers to change during a DLI:\n\n| Address | Register                  |\n|---------|---------------------------|\n| $D000   | Player 0 horizontal pos.  |\n| $D001   | Player 1 horizontal pos.  |\n| $D002   | Player 2 horizontal pos.  |\n| $D003   | Player 3 horizontal pos.  |\n| $D004   | Missile 0 horizontal pos. |\n| $D005   | Missile 1 horizontal pos. |\n| $D006   | Missile 2 horizontal pos. |\n| $D007   | Missile 3 horizontal pos. |\n| $D012   | Color of player/missile 0 |\n| $D013   | Color of player/missile 1 |\n| $D014   | Color of player/missile 2 |\n| $D015   | Color of player/missile 3 |\n| $D016   | Color register 0          |\n| $D017   | Color register 1          |\n| $D018   | Color register 2          |\n| $D019   | Color register 3          |\n| $D01A   | Color of background       |\n\n## Best Practices\n\n1. **Keep DLI routines short** - Long DLI routines can cause display artifacts\n2. **Test thoroughly** - DLIs can be timing-sensitive\n3. **Disable when done** - Always disable DLIs when your program exits\n4. **Use arrays for multiple lines** - Arrays make it easy to change multiple lines\n5. **Document your DLIs** - Note which lines they affect and what they do\n\n## Troubleshooting\n\n**DLI not activating:**\n- Check that you've modified the Display List correctly\n- Verify the DLI is enabled with `DLI name`\n- Ensure the DLI is defined before it's enabled\n\n**Display artifacts:**\n- Reduce the number of operations in the DLI\n- Check timing - some operations may be too slow\n- Verify register addresses are correct\n\n**Colors not changing:**\n- Check that you're writing to the correct color register\n- Verify the graphics mode supports the color changes\n- Ensure the DLI is actually being called (check Display List)\n\n## Related Topics\n\n- [Hardware Registers](../reference/hardware-registers.md) - Complete hardware register reference\n- [Statements](../language-reference/statements.md) - DLI statement syntax\n- [Low-Level Programming](low-level-programming.md) - Memory operations for DLI setup\n"},"currentPath":"advanced-topics/display-list-interrupts"},"__N_SSG":true}