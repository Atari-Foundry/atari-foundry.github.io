{"pageProps":{"product":"atrforge","productDocs":{"product":"atrforge","files":[{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/README.md","relativePath":"README.md","relativeDir":"","filename":"README","slug":"readme","name":"README"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ADVANCED.md","relativePath":"ADVANCED.md","relativeDir":"","filename":"ADVANCED","slug":"advanced","name":"ADVANCED"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATR_FORMAT.md","relativePath":"ATR_FORMAT.md","relativeDir":"","filename":"ATR_FORMAT","slug":"atr-format","name":"ATR FORMAT"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATRCP.md","relativePath":"ATRCP.md","relativeDir":"","filename":"ATRCP","slug":"atrcp","name":"ATRCP"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATRFORGE.md","relativePath":"ATRFORGE.md","relativeDir":"","filename":"ATRFORGE","slug":"atrforge","name":"ATRFORGE"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATTRIBUTIONS.md","relativePath":"ATTRIBUTIONS.md","relativeDir":"","filename":"ATTRIBUTIONS","slug":"attributions","name":"ATTRIBUTIONS"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/BOOT_FILES.md","relativePath":"BOOT_FILES.md","relativeDir":"","filename":"BOOT_FILES","slug":"boot-files","name":"BOOT FILES"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/CHANGELOG.md","relativePath":"CHANGELOG.md","relativeDir":"","filename":"CHANGELOG","slug":"changelog","name":"CHANGELOG"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/CONVERTATR.md","relativePath":"CONVERTATR.md","relativeDir":"","filename":"CONVERTATR","slug":"convertatr","name":"CONVERTATR"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/DOS_FORMATS.md","relativePath":"DOS_FORMATS.md","relativeDir":"","filename":"DOS_FORMATS","slug":"dos-formats","name":"DOS FORMATS"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/EXAMPLES.md","relativePath":"EXAMPLES.md","relativeDir":"","filename":"EXAMPLES","slug":"examples","name":"EXAMPLES"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/FILE_ATTRIBUTES.md","relativePath":"FILE_ATTRIBUTES.md","relativeDir":"","filename":"FILE_ATTRIBUTES","slug":"file-attributes","name":"FILE ATTRIBUTES"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/INSTALLATION.md","relativePath":"INSTALLATION.md","relativeDir":"","filename":"INSTALLATION","slug":"installation","name":"INSTALLATION"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/LSATR.md","relativePath":"LSATR.md","relativeDir":"","filename":"LSATR","slug":"lsatr","name":"LSATR"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/TROUBLESHOOTING.md","relativePath":"TROUBLESHOOTING.md","relativeDir":"","filename":"TROUBLESHOOTING","slug":"troubleshooting","name":"TROUBLESHOOTING"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/UTF8_CONVERSION.md","relativePath":"UTF8_CONVERSION.md","relativeDir":"","filename":"UTF8_CONVERSION","slug":"utf8-conversion","name":"UTF8 CONVERSION"}],"navTree":{"_files":[{"name":"README","slug":"readme","path":"README.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/README.md","isIndex":true},{"name":"ADVANCED","slug":"advanced","path":"ADVANCED.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ADVANCED.md","isIndex":false},{"name":"ATR FORMAT","slug":"atr-format","path":"ATR_FORMAT.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATR_FORMAT.md","isIndex":false},{"name":"ATRCP","slug":"atrcp","path":"ATRCP.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATRCP.md","isIndex":false},{"name":"ATRFORGE","slug":"atrforge","path":"ATRFORGE.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATRFORGE.md","isIndex":false},{"name":"ATTRIBUTIONS","slug":"attributions","path":"ATTRIBUTIONS.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/ATTRIBUTIONS.md","isIndex":false},{"name":"BOOT FILES","slug":"boot-files","path":"BOOT_FILES.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/BOOT_FILES.md","isIndex":false},{"name":"CHANGELOG","slug":"changelog","path":"CHANGELOG.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/CHANGELOG.md","isIndex":false},{"name":"CONVERTATR","slug":"convertatr","path":"CONVERTATR.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/CONVERTATR.md","isIndex":false},{"name":"DOS FORMATS","slug":"dos-formats","path":"DOS_FORMATS.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/DOS_FORMATS.md","isIndex":false},{"name":"EXAMPLES","slug":"examples","path":"EXAMPLES.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/EXAMPLES.md","isIndex":false},{"name":"FILE ATTRIBUTES","slug":"file-attributes","path":"FILE_ATTRIBUTES.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/FILE_ATTRIBUTES.md","isIndex":false},{"name":"INSTALLATION","slug":"installation","path":"INSTALLATION.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/INSTALLATION.md","isIndex":false},{"name":"LSATR","slug":"lsatr","path":"LSATR.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/LSATR.md","isIndex":false},{"name":"TROUBLESHOOTING","slug":"troubleshooting","path":"TROUBLESHOOTING.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/TROUBLESHOOTING.md","isIndex":false},{"name":"UTF8 CONVERSION","slug":"utf8-conversion","path":"UTF8_CONVERSION.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/UTF8_CONVERSION.md","isIndex":false}]}},"docFile":{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/atrforge/CHANGELOG.md","relativePath":"CHANGELOG.md","relativeDir":"","filename":"CHANGELOG","slug":"changelog","name":"CHANGELOG","content":"<!--\n  Copyright (C) 2026 Rick Collette & AtariFoundry.com\n\n  This program is free software; you can redistribute it and/or modify\n  it under the terms of the GNU General Public License as published by\n  the Free Software Foundation, either version 2 of the License, or\n  (at your option) any later version.\n\n  This program is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n  GNU General Public License for more details.\n\n  You should have received a copy of the GNU General Public License along\n  with this program.  If not, see <http://www.gnu.org/licenses/>\n-->\n\n# Changelog\n\nAll notable changes to the atrforge tools will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [Unreleased]\n\n### New Features\n\n- **UTF8/ATASCII Conversion Support** (2026-01-21): Added comprehensive UTF8 ↔ ATASCII conversion\n  functionality across all tools, allowing seamless editing of ATASCII files in modern UTF8 editors:\n  - New shared conversion library (`src/convert.c`, `src/convert.h`) based on example implementation\n  - **convertatr**: Added `--convert-utf8` and `--convert-atascii` options to convert files during\n    ATR resize/sector conversion operations\n  - **atrcp**: Added `--to-utf8`, `--to-atascii`, and `--7bit` options:\n    - `--to-utf8`: Convert ATASCII to UTF8 when extracting files from ATR\n    - `--to-atascii`: Convert UTF8 to ATASCII when adding files to ATR\n    - `--7bit`: Use 7-bit mode (strip high bit) for ATASCII→UTF8 conversion\n  - **atrforge**: Added `--to-atascii` option to convert files from UTF8 to ATASCII when creating\n    or adding to ATR images\n  - Conversion handles newline conversion (0x0a ↔ 155) and UTF8 multi-byte sequences\n  - Files affected: `src/convert.c`, `src/convert.h`, `src/convertatr.c`, `src/convertatr_main.c`,\n    `src/atrcp.c`, `src/mkatr.c`, `src/flist.c`, `src/flist.h`, `Makefile`\n\n- **ATR File Copy Tool** (2026-01-21): New `atrcp` program for copying files between ATR images\n  and the host filesystem:\n  - Extract files from ATR images: `atrcp image.atr:path/to/file.ext output.ext`\n  - Add files to ATR images: `atrcp input.ext image.atr:path/to/file.ext`\n  - Supports SpartaDOS/BW-DOS filesystem format\n  - Creates automatic backups when modifying ATR files\n  - Files affected: `src/atrcp.c`, `Makefile`\n\n- **ATR File Modification** (2026-01-21): Added ability to add files to existing ATR images\n  using the `-a` option in `atrforge`. This creates a backup of the original file\n  before modification.\n  - Files affected: `src/mkatr.c`, `src/modatr.c`, `src/modatr.h`\n  - Note: Full in-place modification (delete/rename) requires additional\n    implementation\n\n- **ATR Conversion Tool** (2026-01-21): New `convertatr` program for converting and resizing\n  ATR images:\n  - Resize images to different sector counts\n  - Convert between 128-byte and 256-byte sector sizes\n  - Files affected: `src/convertatr.c`, `src/convertatr.h`, `src/convertatr_main.c`\n\n### New Features (from previous release)\n\n- **Enhanced CLI Options** (2026-01-21): Added new command-line options to `lsatr`:\n  - `-q` (quiet mode): Suppress informational messages\n  - `-f` (force overwrite): Allow overwriting existing files during extraction\n  - `--verify`: Verify ATR image integrity (checks if image loads correctly and has valid structure)\n  - Files affected: `src/lsatr.c`, `src/msg.c`, `src/msg.h`, `src/lssfs.c`, `src/lsdos.c`, `src/lsextra.c`, `src/lshowfen.c`\n\n### Security Fixes\n\n- **Path Traversal Prevention** (2026-01-21): Added comprehensive path sanitization to prevent\n  directory traversal attacks when extracting files from ATR images. All file\n  paths are now validated to remove `..` components and reject absolute paths.\n  - Implemented `sanitize_path()` function in `compat.c`\n  - Applied path sanitization in `lssfs.c`, `lsdos.c`, and `lsextra.c`\n  - Files affected: `src/compat.c`, `src/compat.h`, `src/lssfs.c`, `src/lsdos.c`, `src/lsextra.c`\n\n- **Unchecked asprintf Return Values** (2026-01-21): Added error checking for all `asprintf()`\n  calls to handle memory allocation failures properly.\n  - Files affected: `src/lssfs.c`, `src/lsdos.c`, `src/lsextra.c`\n\n- **Unsafe String Operations** (2026-01-21): Replaced unsafe `strcpy()` and `strcat()` calls\n  with bounds-checked alternatives (`strncpy()`, `snprintf()`).\n  - Files affected: `src/lsextra.c`, `src/flist.c`\n\n- **Sector Number Validation** (2026-01-21): Added comprehensive sector number validation in\n  all sector access functions to prevent out-of-bounds access.\n  - Added validation in `file_msize()` and `read_file()` in `lssfs.c`\n  - Added validation in `read_file()` in `lsdos.c`\n  - Added validation in `sfs_ptr()`, `sfs_free_sec()`, and `sfs_used()` in `spartafs.c`\n  - Added loop detection to prevent infinite loops in sector chains\n  - Files affected: `src/lssfs.c`, `src/lsdos.c`, `src/spartafs.c`\n\n- **Integer Overflow Protection** (2026-01-21): Added overflow checks in size calculations to\n  prevent buffer overflows and integer wraparound.\n  - Added checks in `image_size()` and `write_atr()` in `mkatr.c`\n  - Added checks in `load_atr_image()` in `atr.c`\n  - Files affected: `src/mkatr.c`, `src/atr.c`\n\n### Code Quality Improvements\n\n- **Build System Organization** (2026-01-21): Improved build system organization:\n  - All compiled binaries now placed in `bin/` directory instead of root directory\n  - Updated `make clean` to remove both `obj/` and `bin/` directories\n  - Better separation of build artifacts and final binaries\n  - Files affected: `Makefile`\n\n- **Error Message Consistency** (2026-01-21): Standardized all error messages to use \"can't\"\n  instead of \"can´t\" throughout the codebase.\n  - Files affected: `src/atr.c`, `src/mkatr.c`, `src/lsdos.c`, `src/lssfs.c`, `src/lsextra.c`, `src/lshowfen.c`\n\n- **Error Handling** (2026-01-21): Improved error handling by:\n  - Checking `fwrite()` return values in `mkatr.c`\n  - Adding better error context to error messages\n  - Ensuring proper cleanup in error paths\n\n- **Memory Safety** (2026-01-21): Improved memory management by:\n  - Ensuring proper cleanup in all error paths\n  - Validating memory allocation results\n  - Preventing memory leaks in error conditions\n\n### Documentation\n\n- **README Updates** (2026-01-21): Enhanced README.md with:\n  - Security considerations section\n  - Build requirements\n  - Known limitations\n  - Installation instructions\n\n- **Security Documentation** (2026-01-21): Created `SECURITY.md` with:\n  - Security features overview\n  - Security recommendations for users and developers\n  - Security issue reporting guidelines\n\n- **Changelog** (2026-01-21): Created `CHANGELOG.md` to track all changes, improvements, and\n  security fixes.\n\n## [1.4~beta] - Previous Release\n\n### Features\n\n- Support for creating ATR images with SpartaDOS/BW-DOS filesystem\n- Support for listing and extracting from multiple DOS formats:\n  - Atari DOS 1, 2.0, 2.5\n  - MyDOS\n  - SpartaDOS and BW-DOS\n  - LiteDOS 2.x and LiteDOS-SE\n  - BAS2BOOT images\n  - Howfen DOS images\n  - K-file boot images\n\n- Boot file support with configurable bootloader address\n- File attribute support (protected, hidden, archived)\n- Directory structure support\n- Multiple disk size formats (90k to 16MB)\n\n### Known Issues (Fixed in Unreleased)\n\n- Path traversal vulnerability in file extraction\n- Unchecked memory allocation return values\n- Unsafe string operations\n- Missing sector number validation\n- Integer overflow vulnerabilities\n- Inconsistent error message formatting\n\n---\n\n## Version History\n\n- **1.4~beta**: Initial public release with core functionality\n- **Unreleased**: Security fixes and code quality improvements\n"},"currentPath":"changelog"},"__N_SSG":true}