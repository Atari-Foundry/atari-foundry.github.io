{"pageProps":{"product":"forge","productDocs":{"product":"forge","files":[{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/cc65/README.md","relativePath":"cc65/README.md","relativeDir":"cc65","filename":"README","slug":"readme","name":"README"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/README.md","relativePath":"README.md","relativeDir":"","filename":"README","slug":"readme","name":"README"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/attributions.md","relativePath":"about/attributions.md","relativeDir":"about","filename":"attributions","slug":"attributions","name":"attributions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/cio-reference.md","relativePath":"advanced-topics/cio-reference.md","relativeDir":"advanced-topics","filename":"cio-reference","slug":"cio-reference","name":"cio-reference"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/compiling.md","relativePath":"getting-started/compiling.md","relativeDir":"getting-started","filename":"compiling","slug":"compiling","name":"compiling"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/differences.md","relativePath":"getting-started/differences.md","relativeDir":"getting-started","filename":"differences","slug":"differences","name":"differences"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/display-list-interrupts.md","relativePath":"advanced-topics/display-list-interrupts.md","relativeDir":"advanced-topics","filename":"display-list-interrupts","slug":"display-list-interrupts","name":"display-list-interrupts"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-guide.md","relativePath":"editor/editor-guide.md","relativeDir":"editor","filename":"editor-guide","slug":"editor-guide","name":"editor-guide"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-optimization.md","relativePath":"editor/editor-optimization.md","relativeDir":"editor","filename":"editor-optimization","slug":"editor-optimization","name":"editor-optimization"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/expressions.md","relativePath":"language-reference/expressions.md","relativeDir":"language-reference","filename":"expressions","slug":"expressions","name":"expressions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/first-steps.md","relativePath":"getting-started/first-steps.md","relativeDir":"getting-started","filename":"first-steps","slug":"first-steps","name":"first-steps"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/fujinet.md","relativePath":"advanced-topics/fujinet.md","relativeDir":"advanced-topics","filename":"fujinet","slug":"fujinet","name":"fujinet"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/functions.md","relativePath":"language-reference/functions.md","relativeDir":"language-reference","filename":"functions","slug":"functions","name":"functions"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/hardware-registers.md","relativePath":"reference/hardware-registers.md","relativeDir":"reference","filename":"hardware-registers","slug":"hardware-registers","name":"hardware-registers"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/index.md","relativePath":"index.md","relativeDir":"","filename":"index","slug":"index","name":"index"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/interrupts.md","relativePath":"reference/interrupts.md","relativeDir":"reference","filename":"interrupts","slug":"interrupts","name":"interrupts"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/introduction.md","relativePath":"getting-started/introduction.md","relativeDir":"getting-started","filename":"introduction","slug":"introduction","name":"introduction"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/iocb-structure.md","relativePath":"reference/iocb-structure.md","relativeDir":"reference","filename":"iocb-structure","slug":"iocb-structure","name":"iocb-structure"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/low-level-programming.md","relativePath":"advanced-topics/low-level-programming.md","relativeDir":"advanced-topics","filename":"low-level-programming","slug":"low-level-programming","name":"low-level-programming"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-map.md","relativePath":"reference/memory-map.md","relativeDir":"reference","filename":"memory-map","slug":"memory-map","name":"memory-map"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-usage.md","relativePath":"reference/memory-usage.md","relativeDir":"reference","filename":"memory-usage","slug":"memory-usage","name":"memory-usage"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/note-point.md","relativePath":"advanced-topics/note-point.md","relativeDir":"advanced-topics","filename":"note-point","slug":"note-point","name":"note-point"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/os-equates.md","relativePath":"reference/os-equates.md","relativeDir":"reference","filename":"os-equates","slug":"os-equates","name":"os-equates"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/r-handler.md","relativePath":"reference/r-handler.md","relativeDir":"reference","filename":"r-handler","slug":"r-handler","name":"r-handler"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/sio-operations.md","relativePath":"advanced-topics/sio-operations.md","relativeDir":"advanced-topics","filename":"sio-operations","slug":"sio-operations","name":"sio-operations"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/statements.md","relativePath":"language-reference/statements.md","relativeDir":"language-reference","filename":"statements","slug":"statements","name":"statements"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/syntax.md","relativePath":"language-reference/syntax.md","relativeDir":"language-reference","filename":"syntax","slug":"syntax","name":"syntax"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/why-forge.md","relativePath":"about/why-forge.md","relativeDir":"about","filename":"why-forge","slug":"why-forge","name":"why-forge"},{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/xio-reference.md","relativePath":"advanced-topics/xio-reference.md","relativeDir":"advanced-topics","filename":"xio-reference","slug":"xio-reference","name":"xio-reference"}],"navTree":{"cc65":{"_files":[{"name":"README","slug":"readme","path":"cc65/README.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/cc65/README.md","isIndex":true}]},"_files":[{"name":"README","slug":"readme","path":"README.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/README.md","isIndex":true},{"name":"index","slug":"index","path":"index.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/index.md","isIndex":false}],"about":{"_files":[{"name":"attributions","slug":"attributions","path":"about/attributions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/attributions.md","isIndex":false},{"name":"why-forge","slug":"why-forge","path":"about/why-forge.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/about/why-forge.md","isIndex":false}]},"advanced-topics":{"_files":[{"name":"cio-reference","slug":"cio-reference","path":"advanced-topics/cio-reference.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/cio-reference.md","isIndex":false},{"name":"display-list-interrupts","slug":"display-list-interrupts","path":"advanced-topics/display-list-interrupts.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/display-list-interrupts.md","isIndex":false},{"name":"fujinet","slug":"fujinet","path":"advanced-topics/fujinet.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/fujinet.md","isIndex":false},{"name":"low-level-programming","slug":"low-level-programming","path":"advanced-topics/low-level-programming.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/low-level-programming.md","isIndex":false},{"name":"note-point","slug":"note-point","path":"advanced-topics/note-point.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/note-point.md","isIndex":false},{"name":"sio-operations","slug":"sio-operations","path":"advanced-topics/sio-operations.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/sio-operations.md","isIndex":false},{"name":"xio-reference","slug":"xio-reference","path":"advanced-topics/xio-reference.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/xio-reference.md","isIndex":false}]},"getting-started":{"_files":[{"name":"compiling","slug":"compiling","path":"getting-started/compiling.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/compiling.md","isIndex":false},{"name":"differences","slug":"differences","path":"getting-started/differences.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/differences.md","isIndex":false},{"name":"first-steps","slug":"first-steps","path":"getting-started/first-steps.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/first-steps.md","isIndex":false},{"name":"introduction","slug":"introduction","path":"getting-started/introduction.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/getting-started/introduction.md","isIndex":false}]},"editor":{"_files":[{"name":"editor-guide","slug":"editor-guide","path":"editor/editor-guide.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-guide.md","isIndex":false},{"name":"editor-optimization","slug":"editor-optimization","path":"editor/editor-optimization.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/editor/editor-optimization.md","isIndex":false}]},"language-reference":{"_files":[{"name":"expressions","slug":"expressions","path":"language-reference/expressions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/expressions.md","isIndex":false},{"name":"functions","slug":"functions","path":"language-reference/functions.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/functions.md","isIndex":false},{"name":"statements","slug":"statements","path":"language-reference/statements.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/statements.md","isIndex":false},{"name":"syntax","slug":"syntax","path":"language-reference/syntax.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/language-reference/syntax.md","isIndex":false}]},"reference":{"_files":[{"name":"hardware-registers","slug":"hardware-registers","path":"reference/hardware-registers.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/hardware-registers.md","isIndex":false},{"name":"interrupts","slug":"interrupts","path":"reference/interrupts.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/interrupts.md","isIndex":false},{"name":"iocb-structure","slug":"iocb-structure","path":"reference/iocb-structure.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/iocb-structure.md","isIndex":false},{"name":"memory-map","slug":"memory-map","path":"reference/memory-map.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-map.md","isIndex":false},{"name":"memory-usage","slug":"memory-usage","path":"reference/memory-usage.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/memory-usage.md","isIndex":false},{"name":"os-equates","slug":"os-equates","path":"reference/os-equates.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/os-equates.md","isIndex":false},{"name":"r-handler","slug":"r-handler","path":"reference/r-handler.md","fullPath":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/reference/r-handler.md","isIndex":false}]}}},"docFile":{"path":"/home/megalith/AtariProjects/AtariFoundry/www/PROJECT_DOCS/forge/advanced-topics/low-level-programming.md","relativePath":"advanced-topics/low-level-programming.md","relativeDir":"advanced-topics","filename":"low-level-programming","slug":"low-level-programming","name":"low-level-programming","content":"# Low-Level Programming\n\nLow-level programming in FORGE involves direct memory manipulation and hardware register access. **Use with care!**\n\n## Overview\n\nFORGE provides several statements and functions for low-level programming:\n\n- **Memory operations**: POKE, PEEK, DPOKE, DPEEK, MOVE, MSET\n- **Address operations**: ADR function\n- **Machine code execution**: USR function\n- **Hardware register access**: Direct memory access\n\n## Memory Operations\n\n### POKE _address_, _value_ / P.\n\n**Writes A Byte To Memory**\n\nWrites the _value_ (modulo 256) to the memory location at _address_.\n\n**Example:**\n```basic\nPOKE 710, 0  ' Set color register 2\nPOKE 53279, 0  ' Read CONSOL register\n```\n\n### PEEK(_address_) / P.(_address_)\n\n**Reads A Byte From Memory**\n\nReturns the value of memory location at _address_.\n\n**Example:**\n```basic\nCONSOL = PEEK(53279)  ' Read console keys\nIF (CONSOL AND 1) = 0 THEN ? \"START pressed\"\n```\n\n### DPOKE _address_, _value_ / D.\n\n**Writes A 16-Bit Number To Memory**\n\nWrites the _value_ to the memory location at _address_ and _address+1_, using standard CPU order (low byte first).\n\n**Example:**\n```basic\nDPOKE 560, $4000  ' Set display list address\n```\n\n### DPEEK(_addr_) / D.(_addr_)\n\n**Reads A 16-Bit Number From Memory**\n\nReturns the value of memory location _addr_ and _addr_+1 as a 16 bit integer.\n\nThis is the same as doing `PEEK(_addr_)+PEEK(_addr_+1)*256`.\n\n**Example:**\n```basic\nDLIST = DPEEK(560)  ' Get display list address\n```\n\n### MOVE _from_, _to_, _length_ / M.\n\n**Copies Bytes In Memory (Forward)**\n\nCopies _length_ bytes in memory at address _from_ to address _to_.\n\nThe `MOVE` version copies from the lower address to the upper address.\n\n**Example:**\n```basic\nMOVE $4000, $5000, 256  ' Copy 256 bytes forward\n```\n\n### -MOVE _from_, _to_, _length_ / -.\n\n**Copies Bytes In Memory (Backward)**\n\nCopies _length_ bytes in memory at address _from_ to address _to_.\n\nThe `-MOVE` version copies from upper address to lower address. Use this when memory ranges overlap and _from_ is lower than _to_.\n\n**Example:**\n```basic\n-MOVE $5000, $4000, 256  ' Copy 256 bytes backward (overlapping)\n```\n\n**Important:** Choose the correct MOVE direction when ranges overlap:\n- If _from_ < _to_, use `-MOVE`\n- If _from_ > _to_, use `MOVE`\n\n### MSET _address_, _length_, _value_ / MS.\n\n**Sets Memory To A Value**\n\nWrites _length_ bytes in memory at given _address_ with _value_.\n\nThis is useful to clear graphics or P/M data, or simply to set a string to a repeated value.\n\n**Example:**\n```basic\nMSET $4000, 1024, 0  ' Clear 1KB of memory\nMSET $D000, 4, 0  ' Clear Player 0-3 horizontal positions\n```\n\n## Address Operations\n\n### ADR(_var_) / &_var_\n\n**Returns Memory Address**\n\nReturns the address of the variable, array, or string in memory.\n\n**Example:**\n```basic\nDIM A(10)\nADDR = ADR(A)  ' or ADDR = &A\n\nA$ = \"Hello\"\nSTR_ADDR = ADR(A$)  ' Address of string structure\n```\n\n**Note:** For strings, `ADR()` returns the address of the string structure (first byte is length), not the first character. This differs from Atari BASIC.\n\n## Machine Code Execution\n\n### USR(_address_[,_num1_ ...])\n\n**Calls Machine Code Subroutine**\n\nLow level function that calls the user supplied machine code subroutine at _address_.\n\nParameters are pushed to the CPU stack, with the LOW part pushed first, so the first PLA returns the HIGH part of the last parameter, and so on.\n\nThe value of `A` and `X` registers is used as a return value of the function, with `A` the low part and `X` the high part.\n\n**Example:**\n```basic\n' PLA / EOR $FF / TAX / PLA / EOR $FF / RTS\nDATA ml() byte = $68,$49,$FF,$AA,$68,$49,$FF,$60\nFOR i=0 TO 1000 STEP 100\n  ? i, USR(ADR(ml),i)\nNEXT i\n```\n\n## String Memory Operations\n\n### $(_addr_)\n\n**Returns String At Memory Address**\n\nReturns the string at memory address _addr_.\n\nThis is the inverse of `ADR()`, and can be used to create arbitrary strings in memory.\n\n**Example:**\n```basic\nDATA x() byte = 2, $41, $42  ' Length 2, \"AB\"\n? $( ADR(x) )  ' Prints \"AB\"\n```\n\nYou can also store string addresses to reuse later:\n\n```basic\nx = ADR(\"Hello\")\n? $( x )  ' Prints \"Hello\"\n```\n\n### %(_n_)\n\n**Floating Point At Memory Address**\n\nReturns the floating-point value stored at memory address _n_.\n\nThis function is special, as it is possible to use it also at the left side of an assignment, to store a floating point into an address:\n\n```basic\n%(1536) = 0.1234\n? %(1536)  ' Prints 0.1234\n```\n\n## Common Patterns\n\n### Reading Hardware Registers\n\n```basic\n' Read console keys\nCONSOL = PEEK(53279)\nIF (CONSOL AND 1) = 0 THEN ? \"START\"\nIF (CONSOL AND 2) = 0 THEN ? \"SELECT\"\nIF (CONSOL AND 4) = 0 THEN ? \"OPTION\"\n\n' Read keyboard\nKEY_CODE = PEEK(764)\nIF KEY_CODE <> 255 THEN ? \"Key: \"; KEY_CODE\n```\n\n### Writing Hardware Registers\n\n```basic\n' Set color registers\nPOKE 708, 0  ' Color 0\nPOKE 709, 16  ' Color 1\nPOKE 710, 32  ' Color 2\nPOKE 711, 48  ' Color 3\n\n' Set Player/Missile positions\nPOKE $D000, 80  ' Player 0 X position\nPOKE $D001, 100  ' Player 1 X position\n```\n\n### Memory Clearing\n\n```basic\n' Clear screen memory\nSCREEN = DPEEK(88)  ' Screen memory address\nMSET SCREEN, 960, 0  ' Clear GRAPHICS 0 screen\n\n' Clear Player/Missile data\nPM_ADDR = PMADR(0)\nMSET PM_ADDR, 256, 0  ' Clear Player 0\n```\n\n### Copying Data\n\n```basic\n' Copy display list\nOLD_DL = DPEEK(560)\nNEW_DL = $4000\nMOVE OLD_DL, NEW_DL, 100  ' Copy display list\nDPOKE 560, NEW_DL  ' Point to new display list\n```\n\n## Safety Warnings\n\n⚠️ **Low-level operations can crash your system!**\n\n1. **Never write to ROM addresses** - Writing to ROM ($C000-$FFFF) will do nothing, but reading is safe\n2. **Be careful with OS addresses** - Writing to OS RAM can crash the system\n3. **Validate addresses** - Check that addresses are in valid RAM ranges\n4. **Save your work** - Low-level bugs can cause system crashes\n5. **Test incrementally** - Test each low-level operation separately\n\n## Safe Memory Ranges\n\n### Generally Safe for Writing\n\n- **$0400-$7FFF** - User RAM (varies by system)\n- **$4000-$7FFF** - Screen memory (graphics modes)\n- **$D000-$D7FF** - Hardware registers (read/write safe)\n- **$D400-$D7FF** - POKEY registers\n- **$D000-$D01F** - GTIA registers\n\n### Read-Only (Hardware)\n\n- **$D200-$D2FF** - ANTIC registers (mostly read-only)\n- **$D300-$D3FF** - PIA registers\n\n### Dangerous (OS/System)\n\n- **$0000-$03FF** - Zero page and stack (OS uses)\n- **$E000-$FFFF** - OS ROM (read-only)\n- **$D800-$DFFF** - Cartridge space (may be ROM)\n\n## Best Practices\n\n1. **Use high-level statements when possible** - They're safer and easier\n2. **Document memory addresses** - Use constants or comments\n3. **Validate before writing** - Check addresses are in safe ranges\n4. **Use ADR() for addresses** - More readable than raw numbers\n5. **Test on emulator first** - Safer than real hardware\n\n## Related Topics\n\n- [Hardware Registers](../reference/hardware-registers.md) - Complete hardware register reference\n- [Memory Map](../reference/memory-map.md) - Atari memory map\n- [Functions](../language-reference/functions.md) - Low-level functions\n- [Statements](../language-reference/statements.md) - Low-level statements\n"},"currentPath":"advanced-topics/low-level-programming"},"__N_SSG":true}